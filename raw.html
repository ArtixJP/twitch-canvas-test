<!DOCTYPE html>

<html lang="en">
<head>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://unpkg.com https://esm.sh https://esm.run https://cdn.tailwindcss.com https://threejs.org https://cdn.threejs.org https://cdn.p5js.org https://code.jquery.com https://d3js.org https://cdn.plot.ly https://cdn.tonejs.org; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; img-src 'self' data: https:; media-src 'self' https:; font-src 'self' https://fonts.gstatic.com https://fonts.googleapis.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; worker-src 'self'; frame-src https://www.youtube.com https://www.youtube-nocookie.com https://player.vimeo.com; connect-src 'self' https: wss: ws:; object-src 'none'; base-uri 'self'; form-action 'self';">
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Twitch plays Claude - Multiverse</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: system-ui, sans-serif; 
            min-height: 100vh; 
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            overflow-x: hidden;
        }
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(0,0,0,0.8);
            padding: 1rem;
            display: flex;
            justify-content: center;
            gap: 2rem;
            z-index: 1000;
        }
        nav button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        nav button:hover, nav button.active {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.6);
        }
        .section {
            display: none;
            min-height: 100vh;
            padding-top: 80px;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        .section.active { display: flex; }
        h1 { font-size: 3rem; text-align: center; margin-bottom: 2rem; }
        /* Space Section */
        #space { background: radial-gradient(ellipse at center, #0d1b2a 0%, #000 100%); }
        .music-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1001;
            background: rgba(0,0,0,0.7);
            padding: 10px 15px;
            border-radius: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .music-controls button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.2rem;
        }
        .orbit-container {
            position: relative;
            width: 400px;
            height: 400px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .moon {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #e0e0e0, #9e9e9e);
            box-shadow: inset -8px -8px 20px rgba(0,0,0,0.4);
            animation: orbit-moon 8s linear infinite;
        }
        .kitty {
            position: absolute;
            font-size: 2rem;
            animation: orbit-kitty 12s linear infinite reverse;
        }
        @keyframes orbit-moon {
            0% { transform: rotate(0deg) translateX(150px) rotate(0deg); }
            100% { transform: rotate(360deg) translateX(150px) rotate(-360deg); }
        }
        @keyframes orbit-kitty {
            0% { transform: rotate(0deg) translateX(180px) rotate(0deg); }
            100% { transform: rotate(360deg) translateX(180px) rotate(-360deg); }
        }
        #three-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        .chase-arena {
            position: relative;
            width: 500px;
            height: 300px;
            background: linear-gradient(180deg, #7ec850 0%, #5a9a30 100%);
            border-radius: 20px;
            border: 4px solid #3d6b1e;
            overflow: hidden;
            margin-top: 1rem;
        }
        .chase-cat, .chase-dog {
            position: absolute;
            font-size: 2.5rem;
            transition: transform 0.1s;
        }
        .scoreboard {
            background: rgba(0,0,0,0.6);
            padding: 10px 20px;
            border-radius: 15px;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        .planet {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4a90d9, #1e3a5f);
            box-shadow: inset -30px -30px 60px rgba(0,0,0,0.5), 0 0 60px rgba(74, 144, 217, 0.4);
            animation: float 4s ease-in-out infinite;
        }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        .stars { position: absolute; width: 100%; height: 100%; overflow: hidden; pointer-events: none; }
        .star { position: absolute; background: white; border-radius: 50%; animation: twinkle 2s infinite; }
        @keyframes twinkle { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
        /* Animals Section */
        #animals { background: linear-gradient(180deg, #87CEEB 0%, #90EE90 100%); }
        .elephant {
            font-size: 8rem;
            cursor: pointer;
            transition: transform 0.2s;
            position: relative;
            z-index: 10;
        }
        .elephant:hover { transform: scale(1.1); }
        .water-drop {
            position: absolute;
            width: 10px;
            height: 15px;
            background: #4fc3f7;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: spray 1s ease-out forwards;
        }
        @keyframes spray {
            0% { opacity: 1; transform: translate(0, 0) scale(1); }
            100% { opacity: 0; transform: translate(var(--x), var(--y)) scale(0.5); }
        }
        /* Games Section */
        #games { background: linear-gradient(135deg, #2d1b69 0%, #11001c 100%); }
        #game-container { border: 3px solid #764ba2; border-radius: 10px; overflow: hidden; }
        .timer-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            height: 5px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            animation: timer 30s linear infinite;
        }
        @keyframes timer { 0% { width: 100%; } 100% { width: 0%; } }
    </style>
</head>
<body>
<nav>
<button id="btn-space" onclick="showSection('space')">üöÄ Space</button>
<button id="btn-animals" onclick="showSection('animals')">üêò Animals</button>
<button id="btn-games" onclick="showSection('games')">üéÆ Games</button>
</nav>
<section class="section active" id="space">
<div class="stars" id="starfield"></div>
<h1>üåå Space Zone</h1>
<div class="orbit-container">
<div id="three-container"></div>
<div class="planet"></div>
<div class="moon"></div>
<div class="kitty">üê±</div>
</div>
<p style="margin-top: 2rem; opacity: 0.7;">A lonely planet floats in the void...</p>
</section>
<section class="section" id="animals">
<h1>ü¶Å Animal Kingdom</h1>
<div class="elephant" onclick="sprayWater(event)" title="Click me!">üêò</div>
<p style="margin-top: 1rem; color: #333;">Click the elephant to spray water!</p>
<div id="water-container" style="position: absolute; pointer-events: none;"></div>
<div class="scoreboard">üêï Dog Catches: <span id="dog-score">0</span></div>
<div class="chase-arena" id="chase-arena">
<div class="chase-cat" id="chase-cat">üê±</div>
<div class="chase-dog" id="chase-dog">üêï</div>
</div>
<p style="margin-top: 1rem; color: #333;">Watch the dog chase the cat!</p>
</section>
<section class="section" id="games">
<h1>üéÆ Arcade Zone</h1>
<div id="game-container"></div>
<p style="margin-top: 1rem; opacity: 0.7;">Use arrow keys or WASD to play!</p>
</section>
<div class="timer-bar"></div>
<div class="music-controls">
<span>üéµ</span>
<button id="music-toggle" onclick="toggleMusic()">‚è∏Ô∏è</button>

</div>
<script>
        // Section Management
        const sections = ['space', 'animals', 'games'];
        let currentIndex = 0;

        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.getElementById('btn-' + id).classList.add('active');
            currentIndex = sections.indexOf(id);
            document.querySelector('.timer-bar').style.animation = 'none';
            setTimeout(() => document.querySelector('.timer-bar').style.animation = 'timer 30s linear infinite', 10);
        }

        // Auto-rotate every 30 seconds
        setInterval(() => {
            currentIndex = (currentIndex + 1) % sections.length;
            showSection(sections[currentIndex]);
        }, 30000);

        // Generate stars
        const starfield = document.getElementById('starfield');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.width = star.style.height = Math.random() * 3 + 1 + 'px';
            star.style.animationDelay = Math.random() * 2 + 's';
            starfield.appendChild(star);
        }

        // Elephant water spray
        function sprayWater(e) {
            const container = document.getElementById('water-container');
            for (let i = 0; i < 15; i++) {
                const drop = document.createElement('div');
                drop.className = 'water-drop';
                drop.style.left = e.clientX + 'px';
                drop.style.top = e.clientY + 'px';
                drop.style.setProperty('--x', (Math.random() - 0.5) * 200 + 'px');
                drop.style.setProperty('--y', -Math.random() * 150 - 50 + 'px');
                container.appendChild(drop);
                setTimeout(() => drop.remove(), 1000);
            }
        }

        // P5.js Snake Game
        let snake, food, dir, gameOver;
        const gridSize = 20;

        new p5((p) => {
            p.setup = () => {
                const canvas = p.createCanvas(400, 400);
                canvas.parent('game-container');
                p.frameRate(10);
                resetGame();
            };

            function resetGame() {
                snake = [{x: 10, y: 10}];
                dir = {x: 1, y: 0};
                placeFood();
                gameOver = false;
            }

            function placeFood() {
                food = {
                    x: p.floor(p.random(p.width / gridSize)),
                    y: p.floor(p.random(p.height / gridSize))
                };
            }

            p.draw = () => {
                p.background(20, 10, 40);
                
                if (gameOver) {
                    p.fill(255);
                    p.textSize(32);
                    p.textAlign(p.CENTER);
                    p.text('GAME OVER', p.width/2, p.height/2);
                    p.textSize(16);
                    p.text('Press SPACE to restart', p.width/2, p.height/2 + 30);
                    return;
                }

                // Move snake
                const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};
                
                // Wall collision
                if (head.x < 0 || head.x >= p.width/gridSize || head.y < 0 || head.y >= p.height/gridSize) {
                    gameOver = true;
                    return;
                }
                
                // Self collision
                for (let s of snake) {
                    if (head.x === s.x && head.y === s.y) {
                        gameOver = true;
                        return;
                    }
                }

                snake.unshift(head);
                
                // Eat food
                if (head.x === food.x && head.y === food.y) {
                    placeFood();
                } else {
                    snake.pop();
                }

                // Draw food
                p.fill(255, 100, 100);
                p.rect(food.x * gridSize, food.y * gridSize, gridSize - 2, gridSize - 2, 4);

                // Draw snake
                for (let i = 0; i < snake.length; i++) {
                    p.fill(100 + i * 5, 200, 100);
                    p.rect(snake[i].x * gridSize, snake[i].y * gridSize, gridSize - 2, gridSize - 2, 4);
                }

                // Score
                p.fill(255);
                p.textSize(14);
                p.text('Score: ' + (snake.length - 1), 10, 20);
            };

            p.keyPressed = () => {
                if (gameOver && p.keyCode === 32) resetGame();
                if ((p.keyCode === p.UP_ARROW || p.key === 'w') && dir.y !== 1) dir = {x: 0, y: -1};
                if ((p.keyCode === p.DOWN_ARROW || p.key === 's') && dir.y !== -1) dir = {x: 0, y: 1};
                if ((p.keyCode === p.LEFT_ARROW || p.key === 'a') && dir.x !== 1) dir = {x: -1, y: 0};
                if ((p.keyCode === p.RIGHT_ARROW || p.key === 'd') && dir.x !== -1) dir = {x: 1, y: 0};
            };
        });

        // Music Controls
        const bgMusic = document.getElementById('bg-music');
        bgMusic.volume = 0.3;
        
        function toggleMusic() {
            const btn = document.getElementById('music-toggle');
            if (bgMusic.paused) {
                bgMusic.play();
                btn.textContent = '‚è∏Ô∏è';
            } else {
                bgMusic.pause();
                btn.textContent = '‚ñ∂Ô∏è';
            }
        }

        // Three.js Sun with lighting
        const threeContainer = document.getElementById('three-container');
        if (threeContainer) {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true });
            renderer.setSize(400, 400);
            threeContainer.appendChild(renderer.domElement);
            
            const sunGeometry = new THREE.SphereGeometry(0.8, 32, 32);
            const sunMaterial = new THREE.MeshBasicMaterial({ color: 0xffdd00 });
            const sun = new THREE.Mesh(sunGeometry, sunMaterial);
            sun.position.set(-3, 2, 0);
            scene.add(sun);
            
            const sunLight = new THREE.PointLight(0xffdd00, 2, 100);
            sunLight.position.copy(sun.position);
            scene.add(sunLight);
            
            const sunGlow = new THREE.Mesh(
                new THREE.SphereGeometry(1.2, 32, 32),
                new THREE.MeshBasicMaterial({ color: 0xffaa00, transparent: true, opacity: 0.3 })
            );
            sunGlow.position.copy(sun.position);
            scene.add(sunGlow);
            
            camera.position.z = 5;
            
            function animateSun() {
                requestAnimationFrame(animateSun);
                sun.rotation.y += 0.01;
                sunGlow.scale.setScalar(1 + Math.sin(Date.now() * 0.003) * 0.1);
                renderer.render(scene, camera);
            }
            animateSun();
        }

        // Dog-Cat Chase Game
        const arena = document.getElementById('chase-arena');
        const chaseCat = document.getElementById('chase-cat');
        const chaseDog = document.getElementById('chase-dog');
        const dogScoreEl = document.getElementById('dog-score');
        const planet = document.querySelector('.planet');
        
        let catPos = { x: 250, y: 150 };
        let dogPos = { x: 50, y: 50 };
        let dogScore = 0;
        let catSpeed = 2;
        const dogSpeed = 1.5;
        const planetColors = ['#4a90d9', '#d94a4a', '#4ad94a', '#d9d94a', '#d94ad9', '#4ad9d9'];
        
        function updateChase() {
            const dx = catPos.x - dogPos.x;
            const dy = catPos.y - dogPos.y;
            const dist = Math.sqrt(dx * dx + dy * dy);
            
            // Dog moves toward cat
            if (dist > 0) {
                dogPos.x += (dx / dist) * dogSpeed;
                dogPos.y += (dy / dist) * dogSpeed;
            }
            
            // Cat escapes when dog is close
            if (dist < 80) {
                catSpeed = 6;
                catPos.x -= (dx / dist) * catSpeed;
                catPos.y -= (dy / dist) * catSpeed;
            } else {
                catSpeed = 2;
                // Cat wanders randomly
                catPos.x += (Math.random() - 0.5) * catSpeed * 3;
                catPos.y += (Math.random() - 0.5) * catSpeed * 3;
            }
            
            // Keep in bounds
            catPos.x = Math.max(20, Math.min(460, catPos.x));
            catPos.y = Math.max(20, Math.min(260, catPos.y));
            dogPos.x = Math.max(20, Math.min(460, dogPos.x));
            dogPos.y = Math.max(20, Math.min(260, dogPos.y));
            
            // Check catch
            if (dist < 30) {
                dogScore++;
                dogScoreEl.textContent = dogScore;
                catPos = { x: Math.random() * 400 + 50, y: Math.random() * 200 + 50 };
                planet.style.background = `linear-gradient(135deg, ${planetColors[dogScore % planetColors.length]}, #1e3a5f)`;
            }
            
            chaseCat.style.left = catPos.x + 'px';
            chaseCat.style.top = catPos.y + 'px';
            chaseDog.style.left = dogPos.x + 'px';
            chaseDog.style.top = dogPos.y + 'px';
            
            // Flip sprites based on direction
            chaseDog.style.transform = dx > 0 ? 'scaleX(1)' : 'scaleX(-1)';
            chaseCat.style.transform = dx < 0 ? 'scaleX(1)' : 'scaleX(-1)';
        }
        
        setInterval(updateChase, 50);

        // Initialize
        showSection('space');
    </script>
</body>
</html>