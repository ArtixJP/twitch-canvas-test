<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Pokemon Adventure - JSGL Game</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'Press Start 2P', system-ui, sans-serif;
  background: linear-gradient(180deg, #87CEEB 0%, #98FB98 100%);
  min-height: 100vh;
  overflow: hidden;
}

#game-container {
  position: relative;
  width: 100vw;
  height: 100vh;
}

#game-canvas {
  display: block;
  background: linear-gradient(180deg, #87CEEB 0%, #90EE90 60%, #228B22 100%);
  image-rendering: pixelated;
}

.ui-overlay {
  position: absolute;
  top: 10px;
  left: 10px;
  right: 10px;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  pointer-events: none;
  z-index: 100;
}

.stats-panel {
  background: linear-gradient(135deg, rgba(0,0,0,0.8), rgba(30,30,60,0.9));
  border: 4px solid #FFD700;
  border-radius: 15px;
  padding: 15px;
  color: white;
  font-size: 12px;
  box-shadow: 0 0 20px rgba(255,215,0,0.5);
  pointer-events: auto;
}

.stats-panel h3 {
  color: #FFD700;
  margin-bottom: 10px;
  text-shadow: 2px 2px #000;
}

.stat-row {
  display: flex;
  align-items: center;
  margin: 8px 0;
  gap: 10px;
}

.stat-icon {
  font-size: 20px;
}

.pokeballs-display {
  display: flex;
  gap: 5px;
}

.pokeball-icon {
  font-size: 18px;
  transition: transform 0.2s;
}

.pokeball-icon:hover {
  transform: scale(1.3);
}

.caught-pokemon {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
  max-width: 200px;
}

.caught-pokemon span {
  font-size: 24px;
  animation: bounce 1s ease-in-out infinite;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

.controls-panel {
  background: linear-gradient(135deg, rgba(0,0,0,0.8), rgba(60,30,30,0.9));
  border: 4px solid #FF6B6B;
  border-radius: 15px;
  padding: 15px;
  color: white;
  font-size: 10px;
  pointer-events: auto;
}

.controls-panel h3 {
  color: #FF6B6B;
  margin-bottom: 10px;
}

.key {
  display: inline-block;
  background: #333;
  border: 2px solid #666;
  border-radius: 5px;
  padding: 3px 8px;
  margin: 2px;
  font-size: 10px;
}

.message-box {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.9);
  border: 4px solid #4CAF50;
  border-radius: 15px;
  padding: 20px 40px;
  color: white;
  font-size: 16px;
  text-align: center;
  opacity: 0;
  transition: opacity 0.3s;
  z-index: 200;
}

.message-box.show {
  opacity: 1;
}

.catch-animation {
  position: absolute;
  font-size: 60px;
  pointer-events: none;
  z-index: 150;
  animation: catchAnim 1s ease-out forwards;
}

@keyframes catchAnim {
  0% { transform: scale(1) rotate(0deg); opacity: 1; }
  50% { transform: scale(1.5) rotate(180deg); opacity: 1; }
  100% { transform: scale(0) rotate(360deg); opacity: 0; }
}

.wild-appear {
  position: absolute;
  font-size: 24px;
  color: #FFD700;
  text-shadow: 2px 2px #000;
  pointer-events: none;
  z-index: 150;
  animation: wildAppear 2s ease-out forwards;
}

@keyframes wildAppear {
  0% { transform: scale(0); opacity: 0; }
  20% { transform: scale(1.2); opacity: 1; }
  80% { transform: scale(1); opacity: 1; }
  100% { transform: translateY(-50px); opacity: 0; }
}

.battle-flash {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: white;
  opacity: 0;
  pointer-events: none;
  z-index: 300;
}

.battle-flash.active {
  animation: battleFlash 0.5s ease-out;
}

@keyframes battleFlash {
  0% { opacity: 0.8; }
  100% { opacity: 0; }
}

.title-screen {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 500;
  transition: opacity 0.5s;
}

.title-screen.hidden {
  opacity: 0;
  pointer-events: none;
}

.game-title {
  font-size: 48px;
  color: #FFD700;
  text-shadow: 4px 4px #FF6B6B, 8px 8px #000;
  margin-bottom: 20px;
  animation: titlePulse 2s ease-in-out infinite;
}

@keyframes titlePulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.title-pokemon {
  font-size: 80px;
  margin: 20px;
  display: flex;
  gap: 20px;
}

.title-pokemon span {
  animation: titleBounce 1s ease-in-out infinite;
}

.title-pokemon span:nth-child(2) { animation-delay: 0.2s; }
.title-pokemon span:nth-child(3) { animation-delay: 0.4s; }
.title-pokemon span:nth-child(4) { animation-delay: 0.6s; }

@keyframes titleBounce {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(10deg); }
}

.start-btn {
  background: linear-gradient(135deg, #FF6B6B, #FF8E53);
  border: 4px solid #FFD700;
  border-radius: 30px;
  padding: 20px 60px;
  font-size: 24px;
  color: white;
  cursor: pointer;
  margin-top: 40px;
  transition: all 0.3s;
  font-family: inherit;
}

.start-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 0 30px rgba(255,107,107,0.8);
}

.subtitle {
  color: #aaa;
  font-size: 14px;
  margin-top: 20px;
}
</style>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&amp;display=swap" rel="stylesheet"/>
</head>
<body>
<div id="game-container">
<canvas id="game-canvas"></canvas>
<div class="ui-overlay">
<div class="stats-panel">
<h3>üéÆ TRAINER STATS</h3>
<div class="stat-row">
<span class="stat-icon">‚≠ê</span>
<span>Score: <span id="score">0</span></span>
</div>
<div class="stat-row">
<span class="stat-icon">üéØ</span>
<span>Pokeballs:</span>
<div class="pokeballs-display" id="pokeballs"></div>
</div>
<div class="stat-row">
<span class="stat-icon">üì¶</span>
<span>Caught:</span>
</div>
<div class="caught-pokemon" id="caught-pokemon"></div>
</div>
<div class="controls-panel">
<h3>üïπÔ∏è CONTROLS</h3>
<p><span class="key">‚Üë</span><span class="key">‚Üì</span><span class="key">‚Üê</span><span class="key">‚Üí</span> Move</p>
<p><span class="key">SPACE</span> Throw Pokeball</p>
<p><span class="key">R</span> Run faster</p>
</div>
</div>
<div class="message-box" id="message-box"></div>
<div class="battle-flash" id="battle-flash"></div>
<div class="title-screen" id="title-screen">
<div class="game-title">üéÆ POKEMON CATCH!</div>
<div class="title-pokemon">
<span>‚ö°</span>
<span>üî•</span>
<span>üíß</span>
<span>üåø</span>
</div>
<p style="color: #FFD700; font-size: 16px;">Catch 'em all!</p>
<button class="start-btn" id="start-btn">‚ñ∂ START GAME</button>
<p class="subtitle">Move with arrow keys, SPACE to catch!</p>
</div>
</div>
<script>
// JSGL-style Pokemon Game Engine
const canvas = document.getElementById('game-canvas');
const ctx = canvas.getContext('2d');

// Set canvas size
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

// Game State
const game = {
  running: false,
  score: 0,
  pokeballs: 10,
  caughtPokemon: [],
  time: 0
};

// Pokemon types with their properties
const POKEMON_TYPES = [
  { emoji: '‚ö°', name: 'Pikachu', color: '#FFD700', speed: 3, points: 100, rarity: 0.3 },
  { emoji: 'üî•', name: 'Charmander', color: '#FF6B6B', speed: 2.5, points: 80, rarity: 0.35 },
  { emoji: 'üíß', name: 'Squirtle', color: '#4FC3F7', speed: 2, points: 70, rarity: 0.4 },
  { emoji: 'üåø', name: 'Bulbasaur', color: '#81C784', speed: 1.8, points: 60, rarity: 0.45 },
  { emoji: 'üêâ', name: 'Dragonite', color: '#9C27B0', speed: 4, points: 200, rarity: 0.1 },
  { emoji: 'üëª', name: 'Gengar', color: '#7B1FA2', speed: 3.5, points: 150, rarity: 0.15 },
  { emoji: 'ü¶ã', name: 'Butterfree', color: '#E1BEE7', speed: 2.8, points: 90, rarity: 0.25 },
  { emoji: 'üê¢', name: 'Blastoise', color: '#0288D1', speed: 1.5, points: 120, rarity: 0.2 },
  { emoji: 'ü¶Ö', name: 'Pidgeot', color: '#8D6E63', speed: 3.2, points: 85, rarity: 0.3 },
  { emoji: 'üåü', name: 'Starmie', color: '#00BCD4', speed: 2.2, points: 95, rarity: 0.25 }
];

// Player object
const player = {
  x: 0,
  y: 0,
  width: 50,
  height: 50,
  speed: 5,
  running: false,
  direction: 'down',
  frame: 0,
  emoji: 'üß¢'
};

// Wild Pokemon array
let wildPokemon = [];

// Pokeballs in flight
let pokeballs = [];

// Particles for effects
let particles = [];

// Grass patches for environment
let grassPatches = [];

// Input handling
const keys = {};
window.addEventListener('keydown', (e) => {
  keys[e.code] = true;
  if (e.code === 'Space' && game.running) {
    e.preventDefault();
    throwPokeball();
  }
});
window.addEventListener('keyup', (e) => keys[e.code] = false);

// Initialize game
function initGame() {
  player.x = canvas.width / 2;
  player.y = canvas.height / 2;
  game.score = 0;
  game.pokeballs = 10;
  game.caughtPokemon = [];
  wildPokemon = [];
  pokeballs = [];
  particles = [];
  
  // Generate grass patches
  grassPatches = [];
  for (let i = 0; i < 50; i++) {
    grassPatches.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      size: 20 + Math.random() * 30
    });
  }
  
  updateUI();
}

// Spawn wild Pokemon
function spawnPokemon() {
  if (wildPokemon.length >= 8) return;
  
  // Select random Pokemon based on rarity
  let selectedType;
  const roll = Math.random();
  let cumulative = 0;
  for (const type of POKEMON_TYPES) {
    cumulative += type.rarity;
    if (roll <= cumulative) {
      selectedType = type;
      break;
    }
  }
  if (!selectedType) selectedType = POKEMON_TYPES[0];
  
  // Spawn position (away from player)
  let x, y;
  do {
    x = Math.random() * (canvas.width - 100) + 50;
    y = Math.random() * (canvas.height - 100) + 50;
  } while (Math.hypot(x - player.x, y - player.y) < 200);
  
  const pokemon = {
    ...selectedType,
    x, y,
    width: 60,
    height: 60,
    vx: (Math.random() - 0.5) * selectedType.speed,
    vy: (Math.random() - 0.5) * selectedType.speed,
    wobble: Math.random() * Math.PI * 2,
    caught: false
  };
  
  wildPokemon.push(pokemon);
  showWildAppear(pokemon);
}

// Show wild Pokemon appearance
function showWildAppear(pokemon) {
  const div = document.createElement('div');
  div.className = 'wild-appear';
  div.textContent = `Wild ${pokemon.name} appeared!`;
  div.style.left = pokemon.x + 'px';
  div.style.top = pokemon.y + 'px';
  document.getElementById('game-container').appendChild(div);
  setTimeout(() => div.remove(), 2000);
}

// Throw pokeball
function throwPokeball() {
  if (game.pokeballs <= 0) {
    showMessage('No Pokeballs left! üò¢');
    return;
  }
  
  game.pokeballs--;
  updateUI();
  
  // Find nearest Pokemon
  let nearest = null;
  let nearestDist = Infinity;
  
  for (const pokemon of wildPokemon) {
    if (pokemon.caught) continue;
    const dist = Math.hypot(pokemon.x - player.x, pokemon.y - player.y);
    if (dist < nearestDist && dist < 300) {
      nearestDist = dist;
      nearest = pokemon;
    }
  }
  
  const targetX = nearest ? nearest.x : player.x + (player.direction === 'right' ? 200 : player.direction === 'left' ? -200 : 0);
  const targetY = nearest ? nearest.y : player.y + (player.direction === 'down' ? 200 : player.direction === 'up' ? -200 : 0);
  
  pokeballs.push({
    x: player.x,
    y: player.y,
    targetX,
    targetY,
    target: nearest,
    speed: 12,
    rotation: 0
  });
}

// Update pokeballs
function updatePokeballs() {
  for (let i = pokeballs.length - 1; i >= 0; i--) {
    const ball = pokeballs[i];
    
    const dx = ball.targetX - ball.x;
    const dy = ball.targetY - ball.y;
    const dist = Math.hypot(dx, dy);
    
    if (dist < 10) {
      // Check if hit Pokemon
      if (ball.target && !ball.target.caught) {
        catchPokemon(ball.target);
      } else {
        // Miss effect
        createParticles(ball.x, ball.y, '#FF6B6B', 10);
      }
      pokeballs.splice(i, 1);
      continue;
    }
    
    ball.x += (dx / dist) * ball.speed;
    ball.y += (dy / dist) * ball.speed;
    ball.rotation += 0.3;
  }
}

// Catch Pokemon
function catchPokemon(pokemon) {
  pokemon.caught = true;
  game.score += pokemon.points;
  game.caughtPokemon.push(pokemon.emoji);
  
  // Flash effect
  document.getElementById('battle-flash').classList.add('active');
  setTimeout(() => document.getElementById('battle-flash').classList.remove('active'), 500);
  
  // Catch animation
  const div = document.createElement('div');
  div.className = 'catch-animation';
  div.textContent = 'üî¥';
  div.style.left = pokemon.x + 'px';
  div.style.top = pokemon.y + 'px';
  document.getElementById('game-container').appendChild(div);
  setTimeout(() => div.remove(), 1000);
  
  // Particles
  createParticles(pokemon.x, pokemon.y, pokemon.color, 30);
  
  showMessage(`Caught ${pokemon.name}! +${pokemon.points} points! üéâ`);
  
  // Remove after animation
  setTimeout(() => {
    const idx = wildPokemon.indexOf(pokemon);
    if (idx > -1) wildPokemon.splice(idx, 1);
  }, 500);
  
  // Bonus pokeball chance
  if (Math.random() < 0.3) {
    game.pokeballs++;
    showMessage('Bonus Pokeball! üéÅ');
  }
  
  updateUI();
}

// Create particles
function createParticles(x, y, color, count) {
  for (let i = 0; i < count; i++) {
    particles.push({
      x, y,
      vx: (Math.random() - 0.5) * 10,
      vy: (Math.random() - 0.5) * 10,
      life: 1,
      color,
      size: 5 + Math.random() * 10
    });
  }
}

// Update particles
function updateParticles() {
  for (let i = particles.length - 1; i >= 0; i--) {
    const p = particles[i];
    p.x += p.vx;
    p.y += p.vy;
    p.vy += 0.2; // gravity
    p.life -= 0.02;
    
    if (p.life <= 0) {
      particles.splice(i, 1);
    }
  }
}

// Update player
function updatePlayer() {
  player.running = keys['KeyR'];
  const speed = player.running ? player.speed * 1.8 : player.speed;
  
  let moving = false;
  
  if (keys['ArrowUp'] || keys['KeyW']) {
    player.y -= speed;
    player.direction = 'up';
    moving = true;
  }
  if (keys['ArrowDown'] || keys['KeyS']) {
    player.y += speed;
    player.direction = 'down';
    moving = true;
  }
  if (keys['ArrowLeft'] || keys['KeyA']) {
    player.x -= speed;
    player.direction = 'left';
    moving = true;
  }
  if (keys['ArrowRight'] || keys['KeyD']) {
    player.x += speed;
    player.direction = 'right';
    moving = true;
  }
  
  // Bounds
  player.x = Math.max(25, Math.min(canvas.width - 25, player.x));
  player.y = Math.max(25, Math.min(canvas.height - 25, player.y));
  
  if (moving) {
    player.frame += 0.2;
  }
}

// Update wild Pokemon
function updateWildPokemon() {
  for (const pokemon of wildPokemon) {
    if (pokemon.caught) continue;
    
    pokemon.wobble += 0.1;
    
    // Move
    pokemon.x += pokemon.vx;
    pokemon.y += pokemon.vy;
    
    // Bounce off walls
    if (pokemon.x < 30 || pokemon.x > canvas.width - 30) pokemon.vx *= -1;
    if (pokemon.y < 30 || pokemon.y > canvas.height - 30) pokemon.vy *= -1;
    
    // Random direction change
    if (Math.random() < 0.01) {
      pokemon.vx = (Math.random() - 0.5) * pokemon.speed * 2;
      pokemon.vy = (Math.random() - 0.5) * pokemon.speed * 2;
    }
    
    // Flee from player if too close
    const distToPlayer = Math.hypot(pokemon.x - player.x, pokemon.y - player.y);
    if (distToPlayer < 100) {
      const angle = Math.atan2(pokemon.y - player.y, pokemon.x - player.x);
      pokemon.vx = Math.cos(angle) * pokemon.speed * 1.5;
      pokemon.vy = Math.sin(angle) * pokemon.speed * 1.5;
    }
  }
}

// Draw functions
function draw() {
  // Clear
  ctx.fillStyle = '#90EE90';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  // Draw grass patches
  ctx.fillStyle = '#228B22';
  for (const grass of grassPatches) {
    ctx.beginPath();
    ctx.arc(grass.x, grass.y, grass.size, 0, Math.PI * 2);
    ctx.fill();
  }
  
  // Draw grid pattern
  ctx.strokeStyle = 'rgba(0,100,0,0.2)';
  ctx.lineWidth = 1;
  for (let x = 0; x < canvas.width; x += 50) {
    ctx.beginPath();
    ctx.moveTo(x, 0);
    ctx.lineTo(x, canvas.height);
    ctx.stroke();
  }
  for (let y = 0; y < canvas.height; y += 50) {
    ctx.beginPath();
    ctx.moveTo(0, y);
    ctx.lineTo(canvas.width, y);
    ctx.stroke();
  }
  
  // Draw wild Pokemon
  for (const pokemon of wildPokemon) {
    if (pokemon.caught) continue;
    
    const wobbleOffset = Math.sin(pokemon.wobble) * 5;
    
    // Shadow
    ctx.fillStyle = 'rgba(0,0,0,0.3)';
    ctx.beginPath();
    ctx.ellipse(pokemon.x, pokemon.y + 35, 25, 10, 0, 0, Math.PI * 2);
    ctx.fill();
    
    // Glow
    ctx.shadowColor = pokemon.color;
    ctx.shadowBlur = 20;
    
    // Pokemon emoji
    ctx.font = '50px Arial';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(pokemon.emoji, pokemon.x, pokemon.y + wobbleOffset);
    
    ctx.shadowBlur = 0;
  }
  
  // Draw player
  ctx.shadowColor = '#FFD700';
  ctx.shadowBlur = player.running ? 30 : 15;
  
  // Player shadow
  ctx.fillStyle = 'rgba(0,0,0,0.3)';
  ctx.beginPath();
  ctx.ellipse(player.x, player.y + 30, 20, 8, 0, 0, Math.PI * 2);
  ctx.fill();
  
  const bounce = Math.sin(player.frame) * 3;
  ctx.font = '45px Arial';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText(player.emoji, player.x, player.y + bounce);
  
  ctx.shadowBlur = 0;
  
  // Draw pokeballs in flight
  for (const ball of pokeballs) {
    ctx.save();
    ctx.translate(ball.x, ball.y);
    ctx.rotate(ball.rotation);
    ctx.font = '30px Arial';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('üî¥', 0, 0);
    ctx.restore();
  }
  
  // Draw particles
  for (const p of particles) {
    ctx.globalAlpha = p.life;
    ctx.fillStyle = p.color;
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.size * p.life, 0, Math.PI * 2);
    ctx.fill();
  }
  ctx.globalAlpha = 1;
}

// Update UI
function updateUI() {
  document.getElementById('score').textContent = game.score;
  
  // Pokeballs display
  const pokeballsDiv = document.getElementById('pokeballs');
  pokeballsDiv.innerHTML = '';
  for (let i = 0; i < Math.min(game.pokeballs, 15); i++) {
    const span = document.createElement('span');
    span.className = 'pokeball-icon';
    span.textContent = 'üî¥';
    pokeballsDiv.appendChild(span);
  }
  if (game.pokeballs > 15) {
    pokeballsDiv.innerHTML += `+${game.pokeballs - 15}`;
  }
  
  // Caught Pokemon
  const caughtDiv = document.getElementById('caught-pokemon');
  caughtDiv.innerHTML = '';
  for (const emoji of game.caughtPokemon.slice(-10)) {
    const span = document.createElement('span');
    span.textContent = emoji;
    caughtDiv.appendChild(span);
  }
}

// Show message
function showMessage(text) {
  const box = document.getElementById('message-box');
  box.textContent = text;
  box.classList.add('show');
  setTimeout(() => box.classList.remove('show'), 2000);
}

// Game loop
function gameLoop() {
  if (!game.running) {
    requestAnimationFrame(gameLoop);
    return;
  }
  
  game.time++;
  
  // Spawn Pokemon periodically
  if (game.time % 180 === 0) {
    spawnPokemon();
  }
  
  // Bonus pokeballs over time
  if (game.time % 600 === 0 && game.pokeballs < 15) {
    game.pokeballs++;
    showMessage('New Pokeball! üéÅ');
    updateUI();
  }
  
  updatePlayer();
  updateWildPokemon();
  updatePokeballs();
  updateParticles();
  draw();
  
  requestAnimationFrame(gameLoop);
}

// Start game
document.getElementById('start-btn').addEventListener('click', () => {
  document.getElementById('title-screen').classList.add('hidden');
  initGame();
  game.running = true;
  
  // Spawn initial Pokemon
  for (let i = 0; i < 4; i++) {
    setTimeout(() => spawnPokemon(), i * 500);
  }
});

// Initialize and start loop
gameLoop();
</script>
</body>
</html>