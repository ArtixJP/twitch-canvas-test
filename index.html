<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitch Versus Code</title>
    <style>
        body { 
            font-family: system-ui, sans-serif; 
            display: flex; 
            flex-direction: column;
            justify-content: flex-start; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            overflow-x: hidden;
        }
        
        /* NAVIGATION MENU */
        .nav-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(135deg, rgba(139, 90, 43, 0.95), rgba(212, 165, 116, 0.95));
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 15px;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            border-bottom: 3px solid #f4e4bc;
        }
        
        .nav-btn {
            background: linear-gradient(135deg, #3d2914 0%, #5a3d1a 100%);
            border: 2px solid #f4e4bc;
            border-radius: 20px;
            padding: 10px 25px;
            font-size: 1rem;
            color: #f4e4bc;
            cursor: pointer;
            font-weight: bold;
            font-family: Georgia, serif;
            transition: all 0.3s ease;
        }
        
        .nav-btn:hover {
            transform: scale(1.05);
            background: linear-gradient(135deg, #5a3d1a 0%, #7a5d3a 100%);
            box-shadow: 0 4px 15px rgba(244, 228, 188, 0.4);
        }
        
        .nav-btn.active {
            background: linear-gradient(135deg, #f4e4bc 0%, #d4a574 100%);
            color: #3d2914;
            box-shadow: 0 0 20px rgba(244, 228, 188, 0.6);
        }
        
        /* SECTIONS */
        .section {
            display: none;
            width: 100%;
            min-height: 100vh;
            padding-top: 80px;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .section.active {
            display: flex;
        }
        
        h1 { font-size: 3rem; text-align: center; margin-bottom: 2rem; }
        
        #sun-container {
            position: fixed;
            top: 100px;
            right: 50px;
            width: 150px;
            height: 150px;
            z-index: 10;
            filter: drop-shadow(0 0 30px rgba(255, 200, 50, 0.8)) drop-shadow(0 0 60px rgba(255, 150, 0, 0.5));
        }
        
        #sun-container canvas {
            border-radius: 50%;
        }
        
        /* Sun light effect on page */
        .section-space::before {
            content: '';
            position: fixed;
            top: 20px;
            right: -50px;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(255, 220, 100, 0.15) 0%, rgba(255, 180, 50, 0.05) 40%, transparent 70%);
            pointer-events: none;
            z-index: 1;
        }
        
        .planet-container {
            position: relative;
            width: 200px;
            height: 200px;
            perspective: 1000px;
        }
        
        .planet {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--planet-color1, #4a90a4) 0%, var(--planet-color2, #2d5a6b) 30%, var(--planet-color3, #1a3a4a) 70%, var(--planet-color4, #0d1f2a) 100%);
            transition: background 0.5s ease, box-shadow 0.5s ease;
            box-shadow: 
                inset -30px -30px 60px rgba(0,0,0,0.6),
                inset 10px 10px 40px rgba(255,255,255,0.1),
                0 0 60px var(--planet-glow, rgba(74, 144, 164, 0.4)),
                0 0 100px var(--planet-glow-outer, rgba(74, 144, 164, 0.2));
            animation: rotate 20s linear infinite;
            position: relative;
            overflow: hidden;
        }
        
        .planet::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 15%;
            width: 70%;
            height: 20%;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            filter: blur(10px);
        }
        
        .planet::after {
            content: '';
            position: absolute;
            top: 40%;
            left: 5%;
            width: 90%;
            height: 15%;
            background: rgba(100, 180, 200, 0.3);
            border-radius: 50%;
            filter: blur(8px);
        }
        
        .ring {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 320px;
            height: 80px;
            border: 8px solid rgba(200, 180, 150, 0.4);
            border-radius: 50%;
            transform: translate(-50%, -50%) rotateX(75deg);
            box-shadow: 
                0 0 20px rgba(200, 180, 150, 0.3),
                inset 0 0 20px rgba(200, 180, 150, 0.2);
            animation: ringRotate 20s linear infinite;
        }
        
        .moon-orbit {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300px;
            height: 300px;
            transform: translate(-50%, -50%);
            animation: orbitMoon 8s linear infinite;
            pointer-events: none;
        }
        
        .moon {
            position: absolute;
            top: -20px;
            left: 50%;
            width: 40px;
            height: 40px;
            margin-left: -20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #e8e8e8 0%, #c0c0c0 30%, #888888 70%, #555555 100%);
            box-shadow: 
                inset -8px -8px 20px rgba(0,0,0,0.4),
                inset 3px 3px 10px rgba(255,255,255,0.3),
                0 0 20px rgba(200, 200, 200, 0.3);
        }
        
        .moon::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 6px;
            width: 8px;
            height: 8px;
            background: rgba(100,100,100,0.5);
            border-radius: 50%;
        }
        
        .moon::after {
            content: '';
            position: absolute;
            top: 18px;
            left: 20px;
            width: 12px;
            height: 10px;
            background: rgba(100,100,100,0.4);
            border-radius: 50%;
        }
        
        @keyframes orbitMoon {
            from { transform: translate(-50%, -50%) rotateZ(0deg); }
            to { transform: translate(-50%, -50%) rotateZ(360deg); }
        }
        
        .ring::before {
            content: '';
            position: absolute;
            top: -15px;
            left: -15px;
            right: -15px;
            bottom: -15px;
            border: 4px solid rgba(180, 160, 130, 0.2);
            border-radius: 50%;
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s ease-in-out infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes ringRotate {
            from { transform: translate(-50%, -50%) rotateX(75deg) rotateZ(0deg); }
            to { transform: translate(-50%, -50%) rotateX(75deg) rotateZ(360deg); }
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .music-player {
            margin-bottom: 2rem;
            text-align: center;
        }
        
        #playPauseBtn {
            background: linear-gradient(135deg, #8b5a2b 0%, #d4a574 50%, #8b5a2b 100%);
            border: 3px solid #f4e4bc;
            border-radius: 25px;
            padding: 12px 28px;
            font-size: 1.1rem;
            color: #3d2914;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(139, 90, 43, 0.5), inset 0 2px 4px rgba(255,255,255,0.3);
            transition: all 0.3s ease;
            font-family: Georgia, serif;
        }
        
        #playPauseBtn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(212, 165, 116, 0.6), inset 0 2px 4px rgba(255,255,255,0.4);
        }
        
        #playPauseBtn:active {
            transform: scale(0.98);
        }
        
        .music-title {
            font-size: 0.9rem;
            color: #d4a574;
            margin-top: 10px;
            font-style: italic;
            opacity: 0.8;
        }
        
        /* ANIMALS SECTION */
        .dog-orbit {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 320px;
            height: 320px;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }
        
        .dog {
            position: absolute;
            top: -30px;
            left: 50%;
            margin-left: -20px;
            font-size: 35px;
            filter: drop-shadow(0 0 10px rgba(255, 200, 100, 0.6));
            transition: transform 0.1s;
        }
        
        .kitty-orbit {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 260px;
            height: 260px;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }
        
        .kitty {
            position: absolute;
            top: -25px;
            left: 50%;
            margin-left: -20px;
            font-size: 35px;
            filter: drop-shadow(0 0 10px rgba(255, 182, 193, 0.6));
            animation: kittyBounce 0.5s ease-in-out infinite;
            transition: filter 0.3s ease;
        }
        
        @keyframes kittyBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .score-display {
            background: linear-gradient(135deg, rgba(139, 90, 43, 0.9), rgba(212, 165, 116, 0.9));
            border: 3px solid #f4e4bc;
            border-radius: 15px;
            padding: 15px 25px;
            font-family: Georgia, serif;
            font-size: 1.3rem;
            color: #3d2914;
            box-shadow: 0 4px 15px rgba(139, 90, 43, 0.5);
            margin-bottom: 2rem;
        }
        
        .score-display span {
            font-weight: bold;
            font-size: 1.5rem;
            color: #8b0000;
        }
        
        .catch-effect {
            position: fixed;
            pointer-events: none;
            font-size: 3rem;
            animation: catchPop 1s ease-out forwards;
            z-index: 1000;
        }
        
        @keyframes catchPop {
            0% { transform: scale(0.5); opacity: 1; }
            50% { transform: scale(1.5); opacity: 1; }
            100% { transform: scale(2) translateY(-50px); opacity: 0; }
        }
        
        .elephant-container {
            font-size: 120px;
            cursor: pointer;
            transition: transform 0.2s;
            filter: drop-shadow(0 0 20px rgba(100, 149, 237, 0.5));
            margin: 2rem 0;
        }
        
        .elephant-container:hover {
            transform: scale(1.1);
        }
        
        .elephant-container:active {
            transform: scale(0.95);
        }
        
        .water-spray {
            position: fixed;
            pointer-events: none;
            z-index: 49;
            font-size: 16px;
            animation: sprayArc 1s ease-out forwards;
        }
        
        @keyframes sprayArc {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--spray-x), var(--spray-y)) scale(0.3);
            }
        }
        
        .trunk-spray {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 30px;
            animation: trunkWiggle 0.3s ease-in-out infinite;
        }
        
        @keyframes trunkWiggle {
            0%, 100% { transform: translateX(-50%) rotate(-5deg); }
            50% { transform: translateX(-50%) rotate(5deg); }
        }
        
        .animals-arena {
            position: relative;
            width: 400px;
            height: 400px;
        }
        
        .chase-planet {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--planet-color1, #4a90a4) 0%, var(--planet-color2, #2d5a6b) 30%, var(--planet-color3, #1a3a4a) 70%, var(--planet-color4, #0d1f2a) 100%);
            box-shadow: 
                inset -20px -20px 40px rgba(0,0,0,0.6),
                inset 5px 5px 20px rgba(255,255,255,0.1),
                0 0 40px var(--planet-glow, rgba(74, 144, 164, 0.4));
        }
        
        /* GAMES SECTION */
        #gameCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: auto;
            z-index: 5;
        }
        
        .game-ui {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 30px;
            z-index: 100;
            font-family: Georgia, serif;
        }
        
        .game-stat {
            background: linear-gradient(135deg, rgba(139, 90, 43, 0.9), rgba(212, 165, 116, 0.9));
            border: 3px solid #f4e4bc;
            border-radius: 15px;
            padding: 10px 20px;
            color: #3d2914;
            box-shadow: 0 4px 15px rgba(139, 90, 43, 0.5);
        }
        
        .game-stat span {
            font-weight: bold;
            font-size: 1.3rem;
            color: #8b0000;
        }
        
        .game-instructions {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            color: #d4a574;
            font-family: Georgia, serif;
            font-style: italic;
            text-align: center;
            z-index: 100;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        
        .planet-health-bar {
            position: fixed;
            bottom: 130px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 20px;
            background: rgba(0,0,0,0.5);
            border: 2px solid #f4e4bc;
            border-radius: 10px;
            overflow: hidden;
            z-index: 100;
        }
        
        .planet-health-fill {
            height: 100%;
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            transition: width 0.3s ease;
            border-radius: 8px;
        }
        
        .game-over-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 200;
        }
        
        .game-over-screen h2 {
            font-size: 3rem;
            color: #e74c3c;
            margin-bottom: 1rem;
            font-family: Georgia, serif;
        }
        
        .game-over-screen p {
            font-size: 1.5rem;
            color: #f4e4bc;
            margin-bottom: 2rem;
        }
        
        .restart-btn {
            background: linear-gradient(135deg, #8b5a2b 0%, #d4a574 50%, #8b5a2b 100%);
            border: 3px solid #f4e4bc;
            border-radius: 25px;
            padding: 15px 40px;
            font-size: 1.2rem;
            color: #3d2914;
            cursor: pointer;
            font-weight: bold;
            font-family: Georgia, serif;
            transition: all 0.3s ease;
        }
        
        .restart-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(212, 165, 116, 0.6);
        }
        
        .section-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            text-shadow: 0 0 20px currentColor;
        }
        
        .section-space .section-title { color: #7dd3fc; }
        .section-animals .section-title { color: #fca5a5; }
        .section-games .section-title { color: #fcd34d; }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <!-- NAVIGATION MENU -->
    <nav class="nav-menu">
        <button class="nav-btn active" onclick="showSection('space')" id="btn-space">üåå Space</button>
        <button class="nav-btn" onclick="showSection('animals')" id="btn-animals">üêæ Animals</button>
        <button class="nav-btn" onclick="showSection('games')" id="btn-games">üéÆ Games</button>
    </nav>
    
    <!-- SPACE SECTION -->
    <section class="section section-space active" id="section-space">
        <div id="sun-container"></div>
        <h1 class="section-title">üåå Space Explorer</h1>
        
        <div class="music-player">
            <button id="playPauseBtn" onclick="toggleMusic()">
                <span id="playIcon">‚ñ∂Ô∏è</span> Play Music
            </button>
            <audio id="bgMusic" loop>
                <source src="https://nu.vgmtreasurechest.com/soundtracks/professor-layton-and-the-unwound-future-hd-android-ios-mobile-gamerip-2020/bhjayocv/08.%20More%20London%20Streets.mp3" type="audio/mpeg">
            </audio>
            <p class="music-title">üé© Professor Layton - More London Streets</p>
        </div>
        
        <div class="planet-container">
            <div class="planet" id="spacePlanet"></div>
            <div class="ring"></div>
            <div class="moon-orbit">
                <div class="moon"></div>
            </div>
        </div>
    </section>
    
    <!-- ANIMALS SECTION -->
    <section class="section section-animals" id="section-animals">
        <h1 class="section-title">üêæ Animal Kingdom</h1>
        
        <div class="score-display">
            üêï Dog Score: <span id="dogScore">0</span>
        </div>
        
        <div class="animals-arena">
            <div class="chase-planet" id="chasePlanet"></div>
            <div class="kitty-orbit" id="kittyOrbit">
                <div class="kitty" id="kitty">üê±</div>
            </div>
            <div class="dog-orbit" id="dogOrbit">
                <div class="dog" id="dog">üêï</div>
            </div>
        </div>
        
        <div class="elephant-container" id="elephant" onclick="sprayWater()">
            üêò
            <div class="trunk-spray" id="trunkSpray" style="display: none;">üí¶</div>
        </div>
        <p style="color: #d4a574; font-style: italic;">Click the elephant to spray water! üí¶</p>
    </section>
    
    <!-- GAMES SECTION -->
    <section class="section section-games" id="section-games">
        <canvas id="gameCanvas"></canvas>
        
        <div class="game-instructions">üéÆ Click to shoot asteroids! Defend the planet! üåç</div>
        
        <div class="planet-health-bar">
            <div class="planet-health-fill" id="healthFill" style="width: 100%"></div>
        </div>
        
        <div class="game-ui">
            <div class="game-stat">‚òÑÔ∏è Destroyed: <span id="asteroidsDestroyed">0</span></div>
            <div class="game-stat">üåü Wave: <span id="waveNumber">1</span></div>
        </div>
        
        <div class="game-over-screen" id="gameOverScreen">
            <h2>üí• Planet Destroyed!</h2>
            <p>You destroyed <span id="finalScore">0</span> asteroids!</p>
            <button class="restart-btn" onclick="restartGame()">üöÄ Play Again</button>
        </div>
    </section>
    
    <script>
        // SECTION NAVIGATION
        let currentSection = 'space';
        let gameActive = false;
        const sections = ['space', 'animals', 'games'];
        let currentSectionIndex = 0;
        
        // Auto-rotate sections every 30 seconds
        setInterval(() => {
            currentSectionIndex = (currentSectionIndex + 1) % sections.length;
            showSection(sections[currentSectionIndex]);
        }, 30000);
        
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            
            // Show selected section
            document.getElementById('section-' + sectionName).classList.add('active');
            document.getElementById('btn-' + sectionName).classList.add('active');
            
            currentSection = sectionName;
            currentSectionIndex = sections.indexOf(sectionName);
            
            // Handle game canvas
            const canvas = document.getElementById('gameCanvas');
            if (sectionName === 'games') {
                canvas.style.pointerEvents = 'auto';
                gameActive = true;
                if (!gameLoopStarted) startGameLoop();
            } else {
                canvas.style.pointerEvents = 'none';
                gameActive = false;
            }
        }
        
        // STARS
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 2 + 's';
            star.style.width = Math.random() * 2 + 1 + 'px';
            star.style.height = star.style.width;
            starsContainer.appendChild(star);
        }
        
        // MUSIC
        const bgMusic = document.getElementById('bgMusic');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const playIcon = document.getElementById('playIcon');
        let isPlaying = false;
        
        function toggleMusic() {
            if (isPlaying) {
                bgMusic.pause();
                playPauseBtn.innerHTML = '<span id="playIcon">‚ñ∂Ô∏è</span> Play Music';
            } else {
                bgMusic.play();
                playPauseBtn.innerHTML = '<span id="playIcon">‚è∏Ô∏è</span> Pause Music';
            }
            isPlaying = !isPlaying;
        }
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Three.js Sun
        const sunContainer = document.getElementById('sun-container');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(150, 150);
        sunContainer.appendChild(renderer.domElement);
        
        const sunGeometry = new THREE.SphereGeometry(2, 64, 64);
        const sunMaterial = new THREE.MeshBasicMaterial({ color: 0xffdd00 });
        const sun = new THREE.Mesh(sunGeometry, sunMaterial);
        scene.add(sun);
        
        const spriteMaterial = new THREE.SpriteMaterial({
            map: createGlowTexture(),
            color: 0xffaa00,
            transparent: true,
            blending: THREE.AdditiveBlending
        });
        const glowSprite = new THREE.Sprite(spriteMaterial);
        glowSprite.scale.set(8, 8, 1);
        sun.add(glowSprite);
        
        const sunLight = new THREE.PointLight(0xffdd44, 2, 100);
        sun.add(sunLight);
        
        const coronaGeometry = new THREE.BufferGeometry();
        const coronaCount = 200;
        const coronaPositions = new Float32Array(coronaCount * 3);
        for(let i = 0; i < coronaCount * 3; i += 3) {
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.random() * Math.PI;
            const r = 2.2 + Math.random() * 0.8;
            coronaPositions[i] = r * Math.sin(phi) * Math.cos(theta);
            coronaPositions[i+1] = r * Math.sin(phi) * Math.sin(theta);
            coronaPositions[i+2] = r * Math.cos(phi);
        }
        coronaGeometry.setAttribute('position', new THREE.BufferAttribute(coronaPositions, 3));
        const coronaMaterial = new THREE.PointsMaterial({
            color: 0xffaa00,
            size: 0.15,
            transparent: true,
            opacity: 0.8,
            blending: THREE.AdditiveBlending
        });
        const corona = new THREE.Points(coronaGeometry, coronaMaterial);
        sun.add(corona);
        
        camera.position.z = 6;
        
        function createGlowTexture() {
            const canvas = document.createElement('canvas');
            canvas.width = 256;
            canvas.height = 256;
            const ctx = canvas.getContext('2d');
            const gradient = ctx.createRadialGradient(128, 128, 0, 128, 128, 128);
            gradient.addColorStop(0, 'rgba(255, 255, 200, 1)');
            gradient.addColorStop(0.2, 'rgba(255, 200, 100, 0.8)');
            gradient.addColorStop(0.5, 'rgba(255, 150, 50, 0.4)');
            gradient.addColorStop(1, 'rgba(255, 100, 0, 0)');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 256, 256);
            return new THREE.CanvasTexture(canvas);
        }
        
        function animateSun() {
            requestAnimationFrame(animateSun);
            sun.rotation.y += 0.005;
            corona.rotation.y -= 0.003;
            corona.rotation.x += 0.002;
            const pulse = 1 + Math.sin(Date.now() * 0.002) * 0.1;
            glowSprite.scale.set(8 * pulse, 8 * pulse, 1);
            renderer.render(scene, camera);
        }
        animateSun();
    </script>
    
    <script>
        // DOG CHASES CAT
        let catAngle = 180;
        let dogAngle = 0;
        let catSpeed = 1.2;
        let dogSpeed = 1.8;
        let dogScore = 0;
        const catchDistance = 30;
        let catchCooldown = false;
        const catNormalSpeed = 1.2;
        const catEscapeSpeed = 4.5;
        const dangerDistance = 60;
        
        const kittyOrbit = document.getElementById('kittyOrbit');
        const dogOrbit = document.getElementById('dogOrbit');
        const kitty = document.getElementById('kitty');
        const dog = document.getElementById('dog');
        
        function getAngleDifference(a1, a2) {
            let diff = Math.abs(a1 - a2) % 360;
            return diff > 180 ? 360 - diff : diff;
        }
        
        const planetPalettes = [
            { c1: '#e74c3c', c2: '#c0392b', c3: '#7b241c', c4: '#4a1410', glow: 'rgba(231, 76, 60, 0.4)' },
            { c1: '#9b59b6', c2: '#8e44ad', c3: '#5b2c6f', c4: '#2c1338', glow: 'rgba(155, 89, 182, 0.4)' },
            { c1: '#2ecc71', c2: '#27ae60', c3: '#1e8449', c4: '#0e4023', glow: 'rgba(46, 204, 113, 0.4)' },
            { c1: '#f39c12', c2: '#d68910', c3: '#9a7d0a', c4: '#5c4a06', glow: 'rgba(243, 156, 18, 0.4)' },
            { c1: '#e91e63', c2: '#c2185b', c3: '#880e4f', c4: '#4a0728', glow: 'rgba(233, 30, 99, 0.4)' },
            { c1: '#00bcd4', c2: '#0097a7', c3: '#006064', c4: '#003638', glow: 'rgba(0, 188, 212, 0.4)' },
            { c1: '#ff5722', c2: '#e64a19', c3: '#bf360c', c4: '#6e1f07', glow: 'rgba(255, 87, 34, 0.4)' },
            { c1: '#4a90a4', c2: '#2d5a6b', c3: '#1a3a4a', c4: '#0d1f2a', glow: 'rgba(74, 144, 164, 0.4)' }
        ];
        
        let currentPaletteIndex = 7;
        
        function changePlanetColor() {
            let newIndex;
            do {
                newIndex = Math.floor(Math.random() * planetPalettes.length);
            } while (newIndex === currentPaletteIndex);
            currentPaletteIndex = newIndex;
            
            const palette = planetPalettes[newIndex];
            const planets = document.querySelectorAll('.planet, .chase-planet');
            planets.forEach(planet => {
                planet.style.setProperty('--planet-color1', palette.c1);
                planet.style.setProperty('--planet-color2', palette.c2);
                planet.style.setProperty('--planet-color3', palette.c3);
                planet.style.setProperty('--planet-color4', palette.c4);
                planet.style.setProperty('--planet-glow', palette.glow);
                planet.style.filter = 'brightness(1.5)';
                setTimeout(() => planet.style.filter = '', 300);
            });
        }
        
        function animateChase() {
            const distance = getAngleDifference(catAngle, dogAngle);
            
            if (distance < catchDistance && !catchCooldown) {
                dogScore++;
                document.getElementById('dogScore').textContent = dogScore;
                changePlanetColor();
                
                const effect = document.createElement('div');
                effect.className = 'catch-effect';
                effect.textContent = 'üéâ CAUGHT!';
                effect.style.left = '50%';
                effect.style.top = '50%';
                effect.style.transform = 'translate(-50%, -50%)';
                document.body.appendChild(effect);
                setTimeout(() => effect.remove(), 1000);
                
                catAngle = (dogAngle + 180) % 360;
                catchCooldown = true;
                setTimeout(() => catchCooldown = false, 500);
            }
            
            if (distance < dangerDistance) {
                catSpeed = catEscapeSpeed;
                kitty.style.filter = 'drop-shadow(0 0 20px rgba(255, 50, 50, 0.9))';
                kitty.textContent = 'üôÄ';
                dog.textContent = 'üêï‚Äçü¶∫';
            } else {
                catSpeed = catNormalSpeed;
                kitty.style.filter = 'drop-shadow(0 0 10px rgba(255, 182, 193, 0.6))';
                kitty.textContent = 'üê±';
                dog.textContent = 'üêï';
            }
            
            catAngle = (catAngle + catSpeed) % 360;
            dogAngle = (dogAngle + dogSpeed) % 360;
            
            kittyOrbit.style.transform = `translate(-50%, -50%) rotateZ(${catAngle}deg)`;
            kitty.style.transform = `rotateZ(${-catAngle}deg)`;
            
            dogOrbit.style.transform = `translate(-50%, -50%) rotateZ(${dogAngle}deg)`;
            dog.style.transform = `rotateZ(${-dogAngle}deg) ${distance < dangerDistance ? 'scale(1.2)' : 'scale(1)'}`;
            
            requestAnimationFrame(animateChase);
        }
        animateChase();
        
        // ELEPHANT WATER SPRAY
        let isSprayingWater = false;
        let sprayInterval = null;
        
        function sprayWater() {
            if (isSprayingWater) return;
            isSprayingWater = true;
            
            const elephant = document.getElementById('elephant');
            const trunkSpray = document.getElementById('trunkSpray');
            const rect = elephant.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top;
            
            trunkSpray.style.display = 'block';
            
            let sprayCount = 0;
            sprayInterval = setInterval(() => {
                if (sprayCount >= 15) {
                    clearInterval(sprayInterval);
                    isSprayingWater = false;
                    trunkSpray.style.display = 'none';
                    return;
                }
                
                for (let i = 0; i < 5; i++) {
                    const drop = document.createElement('div');
                    drop.className = 'water-spray';
                    drop.textContent = ['üíß', 'üí¶', 'üåä'][Math.floor(Math.random() * 3)];
                    drop.style.left = centerX + 'px';
                    drop.style.top = centerY + 'px';
                    
                    const angle = -30 - Math.random() * 120;
                    const distance = 100 + Math.random() * 150;
                    const radians = angle * Math.PI / 180;
                    const sprayX = Math.cos(radians) * distance;
                    const sprayY = Math.sin(radians) * distance;
                    
                    drop.style.setProperty('--spray-x', sprayX + 'px');
                    drop.style.setProperty('--spray-y', sprayY + 'px');
                    
                    document.body.appendChild(drop);
                    setTimeout(() => drop.remove(), 1000);
                }
                sprayCount++;
            }, 100);
        }
    </script>
    
    <script>
        // ASTEROID DEFENSE GAME
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let gameLoopStarted = false;
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        let asteroids = [];
        let bullets = [];
        let particles = [];
        let planetHealth = 100;
        let asteroidsDestroyed = 0;
        let waveNumber = 1;
        let gameOver = false;
        let mouseX = canvas.width / 2;
        let mouseY = canvas.height / 2;
        
        const getPlanetCenter = () => ({
            x: canvas.width / 2,
            y: canvas.height / 2
        });
        
        class Asteroid {
            constructor() {
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.max(canvas.width, canvas.height) * 0.7;
                const planet = getPlanetCenter();
                this.x = planet.x + Math.cos(angle) * distance;
                this.y = planet.y + Math.sin(angle) * distance;
                this.size = 20 + Math.random() * 30;
                this.speed = 0.5 + Math.random() * 1 + waveNumber * 0.1;
                this.rotation = Math.random() * Math.PI * 2;
                this.rotationSpeed = (Math.random() - 0.5) * 0.05;
                this.vertices = this.generateVertices();
                this.health = Math.ceil(this.size / 15);
                
                const dx = planet.x - this.x;
                const dy = planet.y - this.y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                this.vx = (dx / dist) * this.speed;
                this.vy = (dy / dist) * this.speed;
            }
            
            generateVertices() {
                const vertices = [];
                const numVertices = 7 + Math.floor(Math.random() * 5);
                for (let i = 0; i < numVertices; i++) {
                    const angle = (i / numVertices) * Math.PI * 2;
                    const radius = this.size * (0.7 + Math.random() * 0.3);
                    vertices.push({ angle, radius });
                }
                return vertices;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.rotation += this.rotationSpeed;
            }
            
            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);
                ctx.beginPath();
                this.vertices.forEach((v, i) => {
                    const x = Math.cos(v.angle) * v.radius;
                    const y = Math.sin(v.angle) * v.radius;
                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                });
                ctx.closePath();
                ctx.fillStyle = '#8B7355';
                ctx.fill();
                ctx.strokeStyle = '#5D4E37';
                ctx.lineWidth = 3;
                ctx.stroke();
                ctx.beginPath();
                ctx.arc(this.size * 0.2, -this.size * 0.1, this.size * 0.15, 0, Math.PI * 2);
                ctx.fillStyle = '#6B5344';
                ctx.fill();
                ctx.restore();
            }
            
            hitsPlanet() {
                const planet = getPlanetCenter();
                const dx = this.x - planet.x;
                const dy = this.y - planet.y;
                return Math.sqrt(dx * dx + dy * dy) < 80 + this.size;
            }
        }
        
        class Bullet {
            constructor(x, y, targetX, targetY) {
                const planet = getPlanetCenter();
                this.x = planet.x;
                this.y = planet.y;
                const dx = targetX - this.x;
                const dy = targetY - this.y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                this.speed = 12;
                this.vx = (dx / dist) * this.speed;
                this.vy = (dy / dist) * this.speed;
                this.size = 6;
                this.trail = [];
            }
            
            update() {
                this.trail.push({ x: this.x, y: this.y });
                if (this.trail.length > 10) this.trail.shift();
                this.x += this.vx;
                this.y += this.vy;
            }
            
            draw() {
                this.trail.forEach((p, i) => {
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, this.size * (i / this.trail.length) * 0.5, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(255, 200, 100, ${i / this.trail.length * 0.5})`;
                    ctx.fill();
                });
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = '#FFD700';
                ctx.fill();
            }
            
            isOffScreen() {
                return this.x < -50 || this.x > canvas.width + 50 || this.y < -50 || this.y > canvas.height + 50;
            }
        }
        
        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.size = 3 + Math.random() * 5;
                const angle = Math.random() * Math.PI * 2;
                const speed = 2 + Math.random() * 5;
                this.vx = Math.cos(angle) * speed;
                this.vy = Math.sin(angle) * speed;
                this.life = 1;
                this.decay = 0.02 + Math.random() * 0.02;
                this.color = color;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vx *= 0.98;
                this.vy *= 0.98;
                this.life -= this.decay;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size * this.life, 0, Math.PI * 2);
                ctx.fillStyle = this.color.replace('1)', `${this.life})`);
                ctx.fill();
            }
        }
        
        function createExplosion(x, y, count, color) {
            for (let i = 0; i < count; i++) {
                particles.push(new Particle(x, y, color));
            }
        }
        
        function spawnAsteroid() {
            if (!gameOver && gameActive && asteroids.length < 5 + waveNumber * 2) {
                asteroids.push(new Asteroid());
            }
        }
        
        function checkCollisions() {
            bullets.forEach((bullet, bi) => {
                asteroids.forEach((asteroid, ai) => {
                    const dx = bullet.x - asteroid.x;
                    const dy = bullet.y - asteroid.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    
                    if (dist < asteroid.size + bullet.size) {
                        asteroid.health--;
                        bullets.splice(bi, 1);
                        createExplosion(bullet.x, bullet.y, 10, 'rgba(255, 200, 100, 1)');
                        
                        if (asteroid.health <= 0) {
                            createExplosion(asteroid.x, asteroid.y, 30, 'rgba(139, 115, 85, 1)');
                            asteroids.splice(ai, 1);
                            asteroidsDestroyed++;
                            document.getElementById('asteroidsDestroyed').textContent = asteroidsDestroyed;
                            
                            if (asteroidsDestroyed % 10 === 0) {
                                waveNumber++;
                                document.getElementById('waveNumber').textContent = waveNumber;
                            }
                        }
                    }
                });
            });
        }
        
        function updateHealthBar() {
            document.getElementById('healthFill').style.width = planetHealth + '%';
            if (planetHealth > 60) {
                document.getElementById('healthFill').style.background = 'linear-gradient(90deg, #2ecc71, #27ae60)';
            } else if (planetHealth > 30) {
                document.getElementById('healthFill').style.background = 'linear-gradient(90deg, #f39c12, #e67e22)';
            } else {
                document.getElementById('healthFill').style.background = 'linear-gradient(90deg, #e74c3c, #c0392b)';
            }
        }
        
        function gameLoop() {
            if (!gameActive) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                requestAnimationFrame(gameLoop);
                return;
            }
            
            if (gameOver) return;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw planet in center
            const planet = getPlanetCenter();
            ctx.beginPath();
            ctx.arc(planet.x, planet.y, 60, 0, Math.PI * 2);
            const gradient = ctx.createRadialGradient(planet.x - 20, planet.y - 20, 0, planet.x, planet.y, 60);
            gradient.addColorStop(0, '#4a90a4');
            gradient.addColorStop(0.5, '#2d5a6b');
            gradient.addColorStop(1, '#1a3a4a');
            ctx.fillStyle = gradient;
            ctx.fill();
            ctx.shadowColor = 'rgba(74, 144, 164, 0.6)';
            ctx.shadowBlur = 30;
            ctx.fill();
            ctx.shadowBlur = 0;
            
            asteroids.forEach((asteroid, i) => {
                asteroid.update();
                asteroid.draw();
                
                if (asteroid.hitsPlanet()) {
                    createExplosion(asteroid.x, asteroid.y, 40, 'rgba(255, 100, 50, 1)');
                    asteroids.splice(i, 1);
                    planetHealth -= 15;
                    updateHealthBar();
                    
                    if (planetHealth <= 0) {
                        gameOver = true;
                        document.getElementById('finalScore').textContent = asteroidsDestroyed;
                        document.getElementById('gameOverScreen').style.display = 'flex';
                    }
                }
            });
            
            bullets.forEach((bullet, i) => {
                bullet.update();
                bullet.draw();
                if (bullet.isOffScreen()) bullets.splice(i, 1);
            });
            
            particles.forEach((particle, i) => {
                particle.update();
                particle.draw();
                if (particle.life <= 0) particles.splice(i, 1);
            });
            
            checkCollisions();
            
            // Crosshair
            ctx.beginPath();
            ctx.arc(mouseX, mouseY, 15, 0, Math.PI * 2);
            ctx.strokeStyle = 'rgba(255, 215, 0, 0.7)';
            ctx.lineWidth = 2;
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(mouseX - 20, mouseY);
            ctx.lineTo(mouseX + 20, mouseY);
            ctx.moveTo(mouseX, mouseY - 20);
            ctx.lineTo(mouseX, mouseY + 20);
            ctx.stroke();
            
            requestAnimationFrame(gameLoop);
        }
        
        canvas.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });
        
        canvas.addEventListener('click', (e) => {
            if (!gameOver && gameActive) {
                bullets.push(new Bullet(0, 0, e.clientX, e.clientY));
            }
        });
        
        function restartGame() {
            asteroids = [];
            bullets = [];
            particles = [];
            planetHealth = 100;
            asteroidsDestroyed = 0;
            waveNumber = 1;
            gameOver = false;
            document.getElementById('asteroidsDestroyed').textContent = '0';
            document.getElementById('waveNumber').textContent = '1';
            document.getElementById('gameOverScreen').style.display = 'none';
            updateHealthBar();
        }
        
        function startGameLoop() {
            gameLoopStarted = true;
            setInterval(spawnAsteroid, 2000);
            gameLoop();
        }
    </script>
</body>
</html>