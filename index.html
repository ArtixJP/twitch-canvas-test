<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Twitch Versus Code - Multi Universe</title>
<style>
body { 
    font-family: system-ui, sans-serif; 
    margin: 0;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    color: white;
    overflow-x: hidden;
}

.content-section {
    display: none;
    min-height: 100vh;
}

.content-section.active {
    display: flex;
}

h1 { font-size: 3rem; text-align: center; }

.planet-container {
  position: relative;
  width: 300px;
  height: 300px;
}

.orbit-ring {
  position: absolute;
  width: 280px;
  height: 280px;
  border: 2px dashed rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  top: 10px;
  left: 10px;
  animation: rotate 30s linear infinite;
}

.planet {
  position: absolute;
  width: 200px;
  height: 200px;
  top: 50px;
  left: 50px;
  border-radius: 50%;
  background: linear-gradient(135deg, #4a5899 0%, #2d3561 50%, #1a1f3a 100%);
  box-shadow: 
    inset -30px -30px 50px rgba(0, 0, 0, 0.5),
    inset 20px 20px 40px rgba(255, 255, 255, 0.1),
    0 0 60px rgba(74, 88, 153, 0.4);
  animation: float 6s ease-in-out infinite;
  overflow: hidden;
}

.planet-surface {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: 
    radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.2) 0%, transparent 50%),
    radial-gradient(circle at 70% 60%, rgba(100, 120, 180, 0.3) 0%, transparent 40%);
  animation: surfaceRotate 20s linear infinite;
}

.planet-glow {
  position: absolute;
  width: 220px;
  height: 220px;
  top: -10px;
  left: -10px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(138, 153, 230, 0.3) 0%, transparent 70%);
  animation: pulse 4s ease-in-out infinite;
}

@keyframes rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes surfaceRotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes pulse {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; }
}

@keyframes orbitDog {
  from { transform: rotate(0deg) translateX(150px) rotate(0deg); }
  to { transform: rotate(360deg) translateX(150px) rotate(-360deg); }
}

.dog {
  animation: floatDog 2s ease-in-out infinite;
}

@keyframes floatDog {
  0%, 100% { transform: translateX(-50%) translateY(0px) scale(1) scaleX(-1); }
  50% { transform: translateX(-50%) translateY(-6px) scale(1.05) scaleX(-1); }
}

@keyframes orbitKitty {
  from { transform: rotate(0deg) translateX(150px) rotate(0deg); }
  to { transform: rotate(360deg) translateX(150px) rotate(-360deg); }
}

.kitty {
  animation: floatKitty 3s ease-in-out infinite;
}

@keyframes floatKitty {
  0%, 100% { transform: translateX(-50%) translateY(0px) scale(1); }
  50% { transform: translateX(-50%) translateY(-8px) scale(1.1); }
}

.nav-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(138, 153, 230, 0.4);
}

.nav-btn.active {
  background: rgba(74, 88, 153, 0.8) !important;
  border-color: rgba(138, 153, 230, 0.8) !important;
  box-shadow: 0 0 20px rgba(138, 153, 230, 0.6);
}

@keyframes elephantBreathe {
  0%, 100% { transform: scale(1) translateY(0px); }
  50% { transform: scale(1.05) translateY(-10px); }
}

#elephant {
  animation: elephantBreathe 3s ease-in-out infinite;
}

#elephant:hover {
  transform: scale(1.2) !important;
}

@keyframes splashFade {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(0.5) rotate(0deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -200%) scale(2) rotate(360deg);
  }
}

.animal-card {
  background: rgba(255, 255, 255, 0.1);
  padding: 40px;
  border-radius: 20px;
  backdrop-filter: blur(10px);
  border: 2px solid rgba(138, 153, 230, 0.3);
  text-align: center;
  transition: all 0.3s ease;
}

.animal-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 10px 40px rgba(138, 153, 230, 0.5);
  border-color: rgba(138, 153, 230, 0.6);
}
</style>
</head>
<body>
<nav style="position: fixed; top: 0; left: 0; right: 0; z-index: 100; background: rgba(26, 26, 46, 0.95); backdrop-filter: blur(10px); padding: 20px; display: flex; justify-content: center; gap: 30px; border-bottom: 2px solid rgba(138, 153, 230, 0.3); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);">
<button class="nav-btn active" data-section="space" style="background: rgba(74, 88, 153, 0.8); border: 2px solid rgba(138, 153, 230, 0.5); color: white; padding: 12px 30px; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-weight: bold; transition: all 0.3s ease; display: flex; align-items: center; gap: 10px;">üåå SPACE</button>
<button class="nav-btn" data-section="animals" style="background: rgba(74, 88, 153, 0.3); border: 2px solid rgba(138, 153, 230, 0.3); color: white; padding: 12px 30px; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-weight: bold; transition: all 0.3s ease; display: flex; align-items: center; gap: 10px;">üêæ ANIMALS</button>
<button class="nav-btn" data-section="games" style="background: rgba(74, 88, 153, 0.3); border: 2px solid rgba(138, 153, 230, 0.3); color: white; padding: 12px 30px; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-weight: bold; transition: all 0.3s ease; display: flex; align-items: center; gap: 10px;">üéÆ GAMES</button>
</nav>
<!-- SPACE SECTION -->
<div class="content-section active" id="section-space" style="flex-direction: column; align-items: center; padding-top: 100px;">
<h1 style="position: relative; z-index: 10; margin-bottom: 30px;">Solar System</h1>
<audio autoplay="" loop="">
<source src="https://cdn.pixabay.com/audio/2022/03/10/audio_2c87ba15c0.mp3" type="audio/mpeg"/>
</audio>
<div style="position: fixed; bottom: 20px; right: 20px; background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; backdrop-filter: blur(10px); display: flex; align-items: center; gap: 10px; z-index: 50;">
<span style="font-size: 0.9rem;">üéµ Space Ambience</span>
<button onclick="toggleAudio()" style="background: rgba(74, 88, 153, 0.8); border: none; color: white; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-size: 0.9rem;">Pause</button>
</div>
<div style="position: fixed; top: 100px; right: 20px; background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; backdrop-filter: blur(10px); text-align: center; min-width: 150px; z-index: 50;">
<div style="font-size: 0.8rem; opacity: 0.8; margin-bottom: 5px;">CHASE SCORE</div>
<div style="font-size: 2.5rem; font-weight: bold; color: #fdb813;">üêï <span id="dogScore">0</span></div>
<div style="font-size: 0.7rem; opacity: 0.6; margin-top: 5px;">catches</div>
</div>
<div id="sun-canvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none;"></div>
<div class="planet-container" style="position: relative; z-index: 5;">
<div class="orbit-ring"></div>
<div class="planet" id="mainPlanet" style="box-shadow: inset -30px -30px 50px rgba(0, 0, 0, 0.5), inset 20px 20px 40px rgba(255, 255, 255, 0.1), 0 0 60px rgba(74, 88, 153, 0.4), -50px -30px 80px rgba(253, 184, 19, 0.3); transition: background 0.3s ease, box-shadow 0.3s ease;">
<div class="planet-surface"></div>
<div class="planet-glow"></div>
</div>
<div class="kitty-orbit" style="position: absolute; width: 100%; height: 100%; animation: orbitKitty 15s linear infinite;">
<div class="kitty" style="position: absolute; top: -30px; left: 50%; transform: translateX(-50%); font-size: 3rem; filter: drop-shadow(0 0 10px rgba(255, 200, 150, 0.6));" title="Space Kitty!">üê±</div>
</div>
<div class="dog-orbit" style="position: absolute; width: 100%; height: 100%; animation: orbitDog 10s linear infinite;">
<div class="dog" style="position: absolute; top: -30px; left: 50%; transform: translateX(-50%) scaleX(-1); font-size: 2.5rem; filter: drop-shadow(0 0 10px rgba(255, 150, 100, 0.6));" title="Space Dog Chaser!">üêï</div>
</div>
</div>
</div>
<!-- ANIMALS SECTION -->
<div class="content-section" id="section-animals" style="flex-direction: column; align-items: center; justify-content: center; padding-top: 100px;">
<h1 style="margin-bottom: 50px;">üêæ Animal Kingdom</h1>
<div style="display: flex; gap: 80px; align-items: flex-start; justify-content: center; flex-wrap: wrap; max-width: 1200px;">
<!-- Elephant Card -->
<div class="animal-card" style="position: relative;">
<h2 style="margin-bottom: 20px; font-size: 1.8rem;">üêò Water Elephant</h2>
<p style="opacity: 0.8; margin-bottom: 20px;">Click to spray water!</p>
<div id="elephant-container" style="position: relative; text-align: center;">
<div id="elephant" style="font-size: 6rem; cursor: pointer; filter: drop-shadow(0 0 20px rgba(100, 150, 255, 0.5)); transition: transform 0.3s ease;" title="Click me to spray water!">üêò</div>
<canvas id="water-canvas" style="position: fixed; top: 0; left: 0; pointer-events: none; width: 100vw; height: 100vh; z-index: 5;"></canvas>
</div>
</div>
<!-- Dog & Cat Chase -->
<div class="animal-card">
<h2 style="margin-bottom: 20px; font-size: 1.8rem;">üêï Chase Game</h2>
<p style="opacity: 0.8; margin-bottom: 20px;">Dog chases cat in orbit!</p>
<div style="font-size: 4rem; display: flex; gap: 30px; justify-content: center; margin-top: 20px;">
<div style="animation: floatDog 2s ease-in-out infinite;">üêï</div>
<div style="opacity: 0.5;">üí®</div>
<div style="animation: floatKitty 2.5s ease-in-out infinite;">üê±</div>
</div>
<div style="margin-top: 20px; font-size: 1.2rem; color: #fdb813;">
        Score: <span id="animalScore">Check Space section!</span>
</div>
</div>
</div>
</div>
<!-- GAMES SECTION -->
<div class="content-section" id="section-games" style="flex-direction: column; align-items: center; justify-content: center; padding-top: 100px;">
<h1 style="margin-bottom: 30px;">üéÆ Asteroid Dodger</h1><script>
// Auto-rotate sections every 30 seconds
let currentSectionIndex = 0;
const sectionOrder = ['space', 'animals', 'games'];

function autoRotateSections() {
  currentSectionIndex = (currentSectionIndex + 1) % sectionOrder.length;
  const nextSection = sectionOrder[currentSectionIndex];
  
  // Find and click the corresponding nav button
  const targetButton = document.querySelector(`[data-section="${nextSection}"]`);
  if (targetButton) {
    targetButton.click();
    
    // Add visual feedback for auto-rotation
    const indicator = document.createElement('div');
    indicator.textContent = `üîÑ Auto-switching to ${nextSection.toUpperCase()}`;
    indicator.style.cssText = `
      position: fixed;
      top: 90px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(138, 153, 230, 0.9);
      color: white;
      padding: 15px 30px;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: bold;
      z-index: 200;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
      animation: slideDown 0.5s ease-out;
    `;
    document.body.appendChild(indicator);
    
    setTimeout(() => {
      indicator.style.opacity = '0';
      indicator.style.transition = 'opacity 0.5s ease-out';
      setTimeout(() => indicator.remove(), 500);
    }, 2500);
  }
}

// Start auto-rotation after 30 seconds, then repeat
setInterval(autoRotateSections, 30000);

// Add CSS animation for the indicator
const style = document.createElement('style');
style.textContent = `
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateX(-50%) translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
  }
`;
document.head.appendChild(style);
</script>
<p style="font-size: 1.2rem; opacity: 0.8; margin-bottom: 30px;">Use arrow keys to dodge asteroids and collect stars!</p>
<div id="game-container" style="position: relative; z-index: 10; width: 600px; height: 400px; border: 3px solid rgba(255, 255, 255, 0.3); border-radius: 20px; overflow: hidden; box-shadow: 0 0 40px rgba(138, 153, 230, 0.5);"></div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
<script>
// Navigation system
const navButtons = document.querySelectorAll('.nav-btn');
const sections = document.querySelectorAll('.content-section');

navButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    const targetSection = btn.dataset.section;
    
    // Update active button
    navButtons.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    
    // Update active section
    sections.forEach(sec => sec.classList.remove('active'));
    document.getElementById('section-' + targetSection).classList.add('active');
  });
});

// Audio toggle
function toggleAudio() {
  const audio = document.querySelector('[data-llm-id="e2"]');
  const button = event.target;
  if (audio.paused) {
    audio.play();
    button.textContent = 'Pause';
  } else {
    audio.pause();
    button.textContent = 'Play';
  }
}

// Three.js Sun Scene
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;
document.getElementById('sun-canvas').appendChild(renderer.domElement);

const sunGeometry = new THREE.SphereGeometry(3, 64, 64);
const sunMaterial = new THREE.MeshBasicMaterial({
  color: 0xfdb813,
  emissive: 0xfdb813,
  emissiveIntensity: 1
});
const sun = new THREE.Mesh(sunGeometry, sunMaterial);
sun.position.set(-8, 5, -10);
scene.add(sun);

const glowGeometry = new THREE.SphereGeometry(3.5, 64, 64);
const glowMaterial = new THREE.ShaderMaterial({
  uniforms: {
    glowColor: { value: new THREE.Color(0xffaa00) },
    viewVector: { value: camera.position }
  },
  vertexShader: `
    uniform vec3 viewVector;
    varying float intensity;
    void main() {
      vec3 vNormal = normalize(normalMatrix * normal);
      vec3 vNormel = normalize(normalMatrix * viewVector);
      intensity = pow(0.7 - dot(vNormal, vNormel), 3.0);
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `,
  fragmentShader: `
    uniform vec3 glowColor;
    varying float intensity;
    void main() {
      vec3 glow = glowColor * intensity;
      gl_FragColor = vec4(glow, intensity * 0.8);
    }
  `,
  side: THREE.BackSide,
  blending: THREE.AdditiveBlending,
  transparent: true
});
const sunGlow = new THREE.Mesh(glowGeometry, glowMaterial);
sunGlow.position.copy(sun.position);
scene.add(sunGlow);

const sunLight = new THREE.PointLight(0xffffff, 2, 100);
sunLight.position.copy(sun.position);
sunLight.castShadow = true;
scene.add(sunLight);

const ambientLight = new THREE.AmbientLight(0x332211, 0.3);
scene.add(ambientLight);

const planetGeometry = new THREE.SphereGeometry(2, 32, 32);
const planetMaterial = new THREE.MeshStandardMaterial({
  color: 0x4a5899,
  roughness: 0.7,
  metalness: 0.2
});
const planetMesh = new THREE.Mesh(planetGeometry, planetMaterial);
planetMesh.position.set(0, -2, -5);
planetMesh.receiveShadow = true;
planetMesh.castShadow = true;
scene.add(planetMesh);

const particlesGeometry = new THREE.BufferGeometry();
const particlesCount = 2000;
const posArray = new Float32Array(particlesCount * 3);
for(let i = 0; i < particlesCount; i++) {
  const angle = Math.random() * Math.PI * 2;
  const radius = 3.5 + Math.random() * 2;
  const height = (Math.random() - 0.5) * 1;
  posArray[i * 3] = sun.position.x + Math.cos(angle) * radius;
  posArray[i * 3 + 1] = sun.position.y + height;
  posArray[i * 3 + 2] = sun.position.z + Math.sin(angle) * radius;
}
particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
const particlesMaterial = new THREE.PointsMaterial({
  size: 0.05,
  color: 0xffaa00,
  transparent: true,
  opacity: 0.6,
  blending: THREE.AdditiveBlending
});
const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
scene.add(particlesMesh);

camera.position.z = 5;

let time = 0;
function animateThree() {
  requestAnimationFrame(animateThree);
  time += 0.01;
  
  sun.rotation.y += 0.002;
  sunGlow.rotation.y += 0.002;
  
  const pulse = Math.sin(time * 2) * 0.1 + 1;
  sun.scale.set(pulse, pulse, pulse);
  sunLight.intensity = 2 + Math.sin(time * 2) * 0.3;
  
  planetMesh.rotation.y += 0.005;
  particlesMesh.rotation.y += 0.001;
  
  renderer.render(scene, camera);
}
animateThree();

window.addEventListener('resize', () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});

// Chase logic
const kittyOrbitEl = document.querySelector('[data-llm-id="e15"]');
const dogOrbitEl = document.querySelector('[data-llm-id="e17"]');
const kittyEl = document.querySelector('[data-llm-id="e16"]');
const dogEl = document.querySelector('[data-llm-id="e18"]');
const scoreDisplay = document.getElementById('dogScore');

let kittySpeedVal = 15;
let dogSpeedVal = 10;
let isEscapingNow = false;
let dogScore = 0;
let lastCatchTime = 0;

function updateOrbitAnimations() {
  kittyOrbitEl.style.animation = `orbitKitty ${kittySpeedVal}s linear infinite`;
  dogOrbitEl.style.animation = `orbitDog ${dogSpeedVal}s linear infinite`;
}

function getAngle(element) {
  const style = window.getComputedStyle(element);
  const matrix = style.transform;
  if (matrix === 'none') return 0;
  const values = matrix.split('(')[1].split(')')[0].split(',');
  const a = values[0];
  const b = values[1];
  return Math.atan2(b, a) * (180 / Math.PI);
}

function celebrateCatch() {
  const scoreEl = document.getElementById('dogScore');
  scoreEl.style.transform = 'scale(1.5)';
  scoreEl.style.color = '#ff6b6b';
  setTimeout(() => {
    scoreEl.style.transform = 'scale(1)';
    scoreEl.style.color = '#fdb813';
  }, 300);
  
  dogEl.textContent = 'üéâ';
  setTimeout(() => {
    dogEl.textContent = 'üêï';
  }, 1000);
}

function checkProximity() {
  const now = Date.now();
  if (now - lastCatchTime < 5000) return;
  
  const kittyAngleVal = getAngle(kittyOrbitEl);
  const dogAngleVal = getAngle(dogOrbitEl);
  
  const normKitty = ((kittyAngleVal % 360) + 360) % 360;
  const normDog = ((dogAngleVal % 360) + 360) % 360;
  
  let dist = Math.abs(normDog - normKitty);
  if (dist > 180) dist = 360 - dist;
  
  const dogIsBehind = (normDog < normKitty && normKitty - normDog < 180) || 
                      (normDog > normKitty && normDog - normKitty > 180);
  
  if (dist < 25 && dogIsBehind && !isEscapingNow) {
    dogScore++;
    scoreDisplay.textContent = dogScore;
    lastCatchTime = now;
    celebrateCatch();
    
    isEscapingNow = true;
    kittySpeedVal = 4;
    updateOrbitAnimations();
    kittyEl.style.filter = 'drop-shadow(0 0 20px rgba(255, 100, 100, 0.9))';
    kittyEl.textContent = 'üòæ';
    
    setTimeout(() => {
      isEscapingNow = false;
      kittySpeedVal = 15;
      updateOrbitAnimations();
      kittyEl.style.filter = 'drop-shadow(0 0 10px rgba(255, 200, 150, 0.6))';
      kittyEl.textContent = 'üê±';
    }, 3000);
  }
  else if (dist < 40 && dogIsBehind && !isEscapingNow) {
    kittyEl.textContent = 'üòø';
    setTimeout(() => {
      if (!isEscapingNow) kittyEl.textContent = 'üê±';
    }, 500);
  }
}

setInterval(checkProximity, 100);
updateOrbitAnimations();

// Elephant water spray
const elephant = document.getElementById('elephant');
const waterCanvas = document.getElementById('water-canvas');
const ctx = waterCanvas.getContext('2d');

waterCanvas.width = window.innerWidth;
waterCanvas.height = window.innerHeight;

let waterParticles = [];

class WaterDrop {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.vx = Math.random() * 8 - 4;
    this.vy = Math.random() * -8 - 5;
    this.gravity = 0.3;
    this.size = Math.random() * 6 + 3;
    this.life = 100;
    this.maxLife = 100;
    this.color = `rgba(100, 150, 255, ${Math.random() * 0.5 + 0.5})`;
  }
  
  update() {
    this.vy += this.gravity;
    this.x += this.vx;
    this.y += this.vy;
    this.life -= 2;
    
    if (this.y > window.innerHeight - 50) {
      this.vy *= -0.4;
      this.vx *= 0.8;
      this.y = window.innerHeight - 50;
    }
  }
  
  draw() {
    const alpha = this.life / this.maxLife;
    ctx.fillStyle = this.color.replace(/[\d.]+\)$/, `${alpha})`);
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fill();
    
    ctx.fillStyle = `rgba(255, 255, 255, ${alpha * 0.5})`;
    ctx.beginPath();
    ctx.arc(this.x - this.size * 0.3, this.y - this.size * 0.3, this.size * 0.4, 0, Math.PI * 2);
    ctx.fill();
  }
  
  isDead() {
    return this.life <= 0;
  }
}

function sprayWater() {
  const rect = elephant.getBoundingClientRect();
  const elephantX = rect.left + rect.width / 2;
  const elephantY = rect.top + rect.height / 3;
  
  for (let i = 0; i < 30; i++) {
    waterParticles.push(new WaterDrop(elephantX, elephantY));
  }
  
  elephant.style.transform = 'scale(1.15) rotate(-5deg)';
  setTimeout(() => {
    elephant.style.transform = '';
  }, 200);
  
  const splash = document.createElement('div');
  splash.textContent = 'üí¶';
  splash.style.position = 'fixed';
  splash.style.left = elephantX + 'px';
  splash.style.top = elephantY + 'px';
  splash.style.fontSize = '3rem';
  splash.style.pointerEvents = 'none';
  splash.style.zIndex = '20';
  splash.style.animation = 'splashFade 1s ease-out forwards';
  document.body.appendChild(splash);
  
  setTimeout(() => splash.remove(), 1000);
}

function animateWater() {
  ctx.clearRect(0, 0, waterCanvas.width, waterCanvas.height);
  
  for (let i = waterParticles.length - 1; i >= 0; i--) {
    waterParticles[i].update();
    waterParticles[i].draw();
    
    if (waterParticles[i].isDead()) {
      waterParticles.splice(i, 1);
    }
  }
  
  requestAnimationFrame(animateWater);
}

elephant.addEventListener('click', sprayWater);
setInterval(() => {
  if (document.getElementById('section-animals').classList.contains('active')) {
    sprayWater();
  }
}, 5000);

animateWater();

window.addEventListener('resize', () => {
  waterCanvas.width = window.innerWidth;
  waterCanvas.height = window.innerHeight;
});

// P5.js Game
let ship;
let asteroids = [];
let stars = [];
let score = 0;
let gameState = 'start';
let gameSpeed = 2;
let starPowerUp = null;
let invincible = false;
let invincibleTimer = 0;

function setup() {
  let canvas = createCanvas(600, 400);
  canvas.parent('game-container');
  ship = new Ship();
}

function draw() {
  background(10, 15, 35);
  
  if (frameCount % 3 === 0) {
    stars.push({x: width, y: random(height), speed: random(1, 3), size: random(1, 3)});
  }
  for (let i = stars.length - 1; i >= 0; i--) {
    fill(255, 255, 255, 200);
    noStroke();
    circle(stars[i].x, stars[i].y, stars[i].size);
    stars[i].x -= stars[i].speed;
    if (stars[i].x < 0) stars.splice(i, 1);
  }
  
  if (gameState === 'start') {
    textAlign(CENTER, CENTER);
    fill(255);
    textSize(48);
    text('üöÄ ASTEROID DODGER', width/2, height/2 - 60);
    textSize(20);
    text('Use ARROW KEYS to move', width/2, height/2);
    text('Collect ‚≠ê for invincibility!', width/2, height/2 + 30);
    textSize(24);
    fill(253, 184, 19);
    text('Press SPACE to start', width/2, height/2 + 80);
    
  } else if (gameState === 'playing') {
    if (frameCount % 40 === 0) {
      asteroids.push(new Asteroid());
    }
    
    if (frameCount % 300 === 0 && !starPowerUp) {
      starPowerUp = {x: width, y: random(50, height - 50), size: 25};
    }
    
    ship.update();
    ship.display();
    
    for (let i = asteroids.length - 1; i >= 0; i--) {
      asteroids[i].update();
      asteroids[i].display();
      
      if (!invincible && asteroids[i].hits(ship)) {
        gameState = 'gameover';
      }
      
      if (asteroids[i].offscreen()) {
        asteroids.splice(i, 1);
        score += 10;
        gameSpeed += 0.01;
      }
    }
    
    if (starPowerUp) {
      starPowerUp.x -= gameSpeed + 1;
      
      push();
      translate(starPowerUp.x, starPowerUp.y);
      rotate(frameCount * 0.05);
      textSize(starPowerUp.size);
      text('‚≠ê', 0, 0);
      pop();
      
      if (dist(ship.x, ship.y, starPowerUp.x, starPowerUp.y) < 30) {
        invincible = true;
        invincibleTimer = 180;
        starPowerUp = null;
        score += 50;
      }
      
      if (starPowerUp && starPowerUp.x < -50) {
        starPowerUp = null;
      }
    }
    
    if (invincible) {
      invincibleTimer--;
      if (invincibleTimer <= 0) {
        invincible = false;
      }
    }
    
    fill(255);
    textSize(24);
    textAlign(LEFT);
    text('Score: ' + score, 20, 30);
    
    if (invincible) {
      fill(253, 184, 19);
      textSize(18);
      text('‚≠ê INVINCIBLE! ' + Math.ceil(invincibleTimer/60) + 's', 20, 60);
    }
    
  } else if (gameState === 'gameover') {
    textAlign(CENTER, CENTER);
    fill(255, 100, 100);
    textSize(48);
    text('GAME OVER!', width/2, height/2 - 40);
    fill(255);
    textSize(32);
    text('Final Score: ' + score, width/2, height/2 + 20);
    textSize(20);
    fill(253, 184, 19);
    text('Press SPACE to restart', width/2, height/2 + 70);
  }
}

function keyPressed() {
  if (key === ' ') {
    if (gameState === 'start' || gameState === 'gameover') {
      gameState = 'playing';
      asteroids = [];
      stars = [];
      score = 0;
      gameSpeed = 2;
      ship = new Ship();
      starPowerUp = null;
      invincible = false;
      invincibleTimer = 0;
    }
  }
}

class Ship {
  constructor() {
    this.x = 100;
    this.y = height / 2;
    this.size = 30;
    this.speed = 5;
  }
  
  update() {
    if (keyIsDown(UP_ARROW) && this.y > this.size) {
      this.y -= this.speed;
    }
    if (keyIsDown(DOWN_ARROW) && this.y < height - this.size) {
      this.y += this.speed;
    }
    if (keyIsDown(LEFT_ARROW) && this.x > this.size) {
      this.x -= this.speed;
    }
    if (keyIsDown(RIGHT_ARROW) && this.x < 200) {
      this.x += this.speed;
    }
  }
  
  display() {
    push();
    translate(this.x, this.y);
    
    if (invincible) {
      let hue = (frameCount * 5) % 360;
      drawingContext.shadowBlur = 20;
      drawingContext.shadowColor = `hsl(${hue}, 100%, 50%)`;
    }
    
    textSize(this.size);
    textAlign(CENTER, CENTER);
    text('üöÄ', 0, 0);
    
    if (frameCount % 2 === 0) {
      textSize(15);
      text('üí®', -20, 0);
    }
    
    pop();
  }
}

class Asteroid {
  constructor() {
    this.x = width;
    this.y = random(30, height - 30);
    this.size = random(30, 60);
    this.rotation = random(TWO_PI);
    this.rotSpeed = random(-0.05, 0.05);
    this.emoji = random(['‚òÑÔ∏è', 'üåë', 'ü™®']);
  }
  
  update() {
    this.x -= gameSpeed;
    this.rotation += this.rotSpeed;
  }
  
  display() {
    push();
    translate(this.x, this.y);
    rotate(this.rotation);
    textSize(this.size);
    textAlign(CENTER, CENTER);
    text(this.emoji, 0, 0);
    pop();
  }
  
  hits(ship) {
    let d = dist(this.x, this.y, ship.x, ship.y);
    return d < (this.size/2 + ship.size/2 - 10);
  }
  
  offscreen() {
    return this.x < -this.size;
  }
}
</script>
</body>
</html>