<!DOCTYPE html>

<html lang="en">
<head>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://unpkg.com https://esm.sh https://esm.run https://cdn.tailwindcss.com https://threejs.org https://cdn.threejs.org https://cdn.p5js.org https://code.jquery.com https://d3js.org https://cdn.plot.ly https://cdn.tonejs.org; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; img-src 'self' data: https:; media-src 'self' https:; font-src 'self' https://fonts.gstatic.com https://fonts.googleapis.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; worker-src 'self'; frame-src https://www.youtube.com https://www.youtube-nocookie.com https://player.vimeo.com; connect-src 'self' https: wss: ws:; object-src 'none'; base-uri 'self'; form-action 'self';">
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>üéØ Date Guesser - Renaissance Edition üé≠</title>
<style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', system-ui, sans-serif; 
            min-height: 100vh; 
            background: radial-gradient(ellipse at center, #2d1810 0%, #1a0f0a 100%);
            color: white;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .title {
            text-align: center;
            padding: 30px 0;
            font-size: 2.5rem;
            background: linear-gradient(90deg, #ffd700, #ff6b6b, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: glow 2s ease-in-out infinite;
        }
        
        @keyframes glow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
        }
        
        .score-panel {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .score-box {
            background: linear-gradient(135deg, rgba(100, 50, 200, 0.3), rgba(50, 100, 200, 0.3));
            border: 2px solid #ffd700;
            border-radius: 15px;
            padding: 15px 30px;
            text-align: center;
        }
        
        .score-label {
            font-size: 0.9rem;
            color: #aaa;
            letter-spacing: 2px;
        }
        
        .score-value {
            font-size: 2rem;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .game-area {
            background: linear-gradient(135deg, #1a1a4a 0%, #2a2a6a 100%);
            border: 3px solid #ffd700;
            border-radius: 25px;
            padding: 40px;
            width: 100%;
            max-width: 600px;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.2);
            animation: float 4s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .event-label {
            color: #ffd700;
            font-size: 0.9rem;
            letter-spacing: 3px;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .event-text {
            font-size: 1.5rem;
            text-align: center;
            line-height: 1.5;
            margin-bottom: 30px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .input-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .date-input {
            width: 200px;
            padding: 15px 20px;
            font-size: 1.5rem;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 15px;
            color: white;
            outline: none;
            transition: all 0.3s;
        }
        
        .date-input:focus {
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }
        
        .date-input::placeholder {
            color: #666;
        }
        
        .hint-text {
            color: #888;
            font-size: 0.85rem;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            border: none;
            border-radius: 15px;
            padding: 15px 50px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #1a0a30;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .submit-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }
        
        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .result-panel {
            margin-top: 30px;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            display: none;
            animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes popIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .result-panel.show {
            display: block;
        }
        
        .result-panel.excellent {
            background: rgba(46, 204, 113, 0.3);
            border: 2px solid #2ecc71;
        }
        
        .result-panel.good {
            background: rgba(52, 152, 219, 0.3);
            border: 2px solid #3498db;
        }
        
        .result-panel.ok {
            background: rgba(241, 196, 15, 0.3);
            border: 2px solid #f1c40f;
        }
        
        .result-panel.poor {
            background: rgba(231, 76, 60, 0.3);
            border: 2px solid #e74c3c;
        }
        
        .result-emoji {
            font-size: 3rem;
            margin-bottom: 10px;
        }
        
        .result-text {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        
        .result-details {
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .points-earned {
            font-size: 2rem;
            font-weight: bold;
            color: #ffd700;
            margin-top: 15px;
        }
        
        .next-btn {
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #fff;
            border-radius: 10px;
            padding: 10px 30px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .next-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
            margin-top: 20px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ff6b6b);
            border-radius: 4px;
            transition: width 0.5s;
        }
        
        .question-counter {
            color: #888;
            font-size: 0.9rem;
            margin-top: 10px;
        }
        
        .timer-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }
        
        .timer {
            font-size: 2rem;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .timer.warning {
            color: #ff6b6b;
            animation: pulse 0.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .timer-bar {
            width: 100%;
            height: 6px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 3px;
            margin-bottom: 15px;
            overflow: hidden;
        }
        
        .timer-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ffd700);
            border-radius: 3px;
            transition: width 1s linear;
        }
        
        .stars {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .star {
            position: absolute;
            width: auto;
            height: auto;
            font-size: 1.5rem;
            background: transparent;
            border-radius: 50%;
            animation: twinkle 2s ease-in-out infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .firework {
            position: fixed;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1000;
            animation: firework-explode 1.5s ease-out forwards;
        }
        
        @keyframes firework-explode {
            0% { transform: scale(0); opacity: 1; }
            50% { opacity: 1; }
            100% { transform: scale(20); opacity: 0; }
        }
        
        .firework-particle {
            position: fixed;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1000;
            animation: particle-fly 1.5s ease-out forwards;
        }
        
        @keyframes particle-fly {
            0% { opacity: 1; transform: translate(0, 0) scale(1); }
            100% { opacity: 0; transform: translate(var(--tx), var(--ty)) scale(0); }
        }
        
        .fireworks-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
            background: radial-gradient(ellipse at center, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
            animation: flash-bg 0.5s ease-out;
        }
        
        @keyframes flash-bg {
            0% { background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.5) 0%, transparent 50%); }
            100% { background: radial-gradient(ellipse at center, rgba(255, 215, 0, 0.1) 0%, transparent 70%); }
        }
        
        .final-score {
            display: none;
            text-align: center;
            padding: 40px;
        }
        
        .final-score.show {
            display: block;
        }
        
        .final-title {
            font-size: 2rem;
            color: #ffd700;
            margin-bottom: 20px;
        }
        
        .final-points {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(90deg, #ffd700, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .restart-btn {
            margin-top: 30px;
            background: linear-gradient(135deg, #9b59b6, #3498db);
            border: none;
            border-radius: 15px;
            padding: 15px 40px;
            font-size: 1.2rem;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .restart-btn:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
<div class="stars">
<div class="star" style="top: 10%; left: 20%; animation-delay: 0s;">üé≠</div>
<div class="star" style="top: 15%; left: 80%; animation-delay: 0.5s;">üé®</div>
<div class="star" style="top: 5%; left: 50%; animation-delay: 1s;">üìú</div>
<div class="star" style="top: 25%; left: 30%; animation-delay: 1.5s;">üñºÔ∏è</div>
<div class="star" style="top: 8%; left: 70%; animation-delay: 2s;"></div>
<div class="star" style="top: 60%; left: 10%; animation-delay: 0.3s;"></div>
<div class="star" style="top: 80%; left: 90%; animation-delay: 0.8s;"></div>
<div class="star" style="top: 45%; left: 5%; animation-delay: 1.2s;"></div>
<div class="star" style="top: 70%; left: 75%; animation-delay: 0.6s;"></div>
</div>
<div class="container">
<h1 class="title">üé≠ Date Guesser - Renaissance Edition üé®</h1>
<div class="score-panel">
<div class="score-box">
<div class="score-label">TOTAL SCORE</div>
<div class="score-value" id="total-score">0</div>
</div>
<div class="score-box">
<div class="score-label">BEST GUESS</div>
<div class="score-value" id="best-score">0</div>
</div>
</div>
<div class="game-area" id="game-area">
<div class="event-label">üìú HARK! WHEN DID THIS OCCURETH? üé≠</div>
<div class="timer-container">
<span>‚è≥</span>
<span class="timer" id="timer">30</span>
<span>seconds</span>
</div>
<div class="timer-bar">
<div class="timer-fill" id="timer-fill" style="width: 100%"></div>
</div>
<div class="event-text" id="event-text">Loading...</div>
<div class="input-section">
<input class="date-input" id="date-input" max="2024" min="-3000" placeholder="Year" type="number" value="1969"/>
<span class="hint-text">üé≠ Pray tell, enter the year (e.g., 1503) üé®</span>
<button class="submit-btn" id="submit-btn">üé≠ Make Thy Guess!</button>
</div>
<div class="result-panel" id="result-panel">
<div class="result-emoji" id="result-emoji">üéâ</div>
<div class="result-text" id="result-text"></div>
<div class="result-details" id="result-details"></div>
<div class="points-earned" id="points-earned">+0 points</div>
<button class="next-btn" id="next-btn">üé® Onward, Noble Scholar ‚Üí</button>
</div>
<div class="progress-bar">
<div class="progress-fill" id="progress-fill" style="width: 0%"></div>
</div>
<div class="question-counter" id="question-counter">Question 1 / 10</div>
</div>
<div class="final-score" id="final-score">
<div class="final-title">üé≠ Huzzah! Thy Quest is Complete! üèÜ</div>
<div class="final-points" id="final-points">0</div>
<div style="color: #aaa; margin-top: 10px;">Total Points</div>
<button class="restart-btn" id="restart-btn">üé≠ Embark Anew üîÑ</button>
</div>
</div>
<script>
        const historicalEvents = [
            { event: "First Moon Landing (Apollo 11)", year: 1969 },
            { event: "Fall of the Berlin Wall", year: 1989 },
            { event: "Christopher Columbus reaches America", year: 1492 },
            { event: "French Revolution begins", year: 1789 },
            { event: "World War I starts", year: 1914 },
            { event: "World War II ends", year: 1945 },
            { event: "Declaration of Independence (USA)", year: 1776 },
            { event: "Titanic sinks", year: 1912 },
            { event: "First iPhone released", year: 2007 },
            { event: "Martin Luther King Jr.'s 'I Have a Dream' speech", year: 1963 },
            { event: "Construction of the Great Wall of China begins", year: -221 },
            { event: "Gutenberg invents the printing press", year: 1440 },
            { event: "Napoleon's defeat at Waterloo", year: 1815 },
            { event: "First powered flight by Wright Brothers", year: 1903 },
            { event: "Black Death reaches Europe", year: 1347 },
            { event: "Signing of Magna Carta", year: 1215 },
            { event: "Fall of the Roman Empire", year: 476 },
            { event: "Einstein publishes Theory of Relativity", year: 1905 },
            { event: "Chernobyl disaster", year: 1986 },
            { event: "Nelson Mandela released from prison", year: 1990 },
            { event: "First Olympic Games in modern era (Athens)", year: 1896 },
            { event: "Assassination of Julius Caesar", year: -44 },
            { event: "Construction of Eiffel Tower completed", year: 1889 },
            { event: "Russian Revolution", year: 1917 },
            { event: "Discovery of Penicillin", year: 1928 },
            { event: "Star Wars: A New Hope released in theaters", year: 1977 },
            { event: "Leonardo da Vinci paints the Mona Lisa", year: 1503 },
            { event: "Michelangelo completes the Sistine Chapel ceiling", year: 1512 },
            { event: "Shakespeare writes Romeo and Juliet", year: 1597 },
            { event: "The Renaissance begins in Florence", year: 1400 }
        ];
        
        let currentEvent = null;
        let totalScore = 0;
        let bestScore = 0;
        let questionNumber = 0;
        let maxQuestions = 10;
        let usedEvents = [];
        let timeLeft = 30;
        let timerInterval = null;
        const timerEl = document.getElementById('timer');
        const timerFill = document.getElementById('timer-fill');
        
        const eventText = document.getElementById('event-text');
        const dateInput = document.getElementById('date-input');
        const submitBtn = document.getElementById('submit-btn');
        const resultPanel = document.getElementById('result-panel');
        const resultEmoji = document.getElementById('result-emoji');
        const resultText = document.getElementById('result-text');
        const resultDetails = document.getElementById('result-details');
        const pointsEarned = document.getElementById('points-earned');
        const nextBtn = document.getElementById('next-btn');
        const totalScoreEl = document.getElementById('total-score');
        const bestScoreEl = document.getElementById('best-score');
        const progressFill = document.getElementById('progress-fill');
        const questionCounter = document.getElementById('question-counter');
        const gameArea = document.getElementById('game-area');
        const finalScore = document.getElementById('final-score');
        const finalPoints = document.getElementById('final-points');
        const restartBtn = document.getElementById('restart-btn');
        
        function getRandomEvent() {
            const available = historicalEvents.filter(e => !usedEvents.includes(e.event));
            if (available.length === 0) {
                usedEvents = [];
                return historicalEvents[Math.floor(Math.random() * historicalEvents.length)];
            }
            const event = available[Math.floor(Math.random() * available.length)];
            usedEvents.push(event.event);
            return event;
        }
        
        function calculatePoints(guess, actual) {
            const difference = Math.abs(guess - actual);
            if (difference === 0) return 1000;
            if (difference <= 1) return 900;
            if (difference <= 5) return 700;
            if (difference <= 10) return 500;
            if (difference <= 25) return 300;
            if (difference <= 50) return 150;
            if (difference <= 100) return 75;
            if (difference <= 200) return 25;
            return 10;
        }
        
        function getResultClass(points) {
            if (points >= 700) return 'excellent';
            if (points >= 400) return 'good';
            if (points >= 150) return 'ok';
            return 'poor';
        }
        
        function getResultEmoji(points) {
            if (points >= 900) return 'üéØ';
            if (points >= 700) return 'üî•';
            if (points >= 400) return 'üëç';
            if (points >= 150) return 'üòÖ';
            return 'üò¨';
        }
        
        function getResultMessage(points, difference) {
            if (points === 1000) return 'PERFECT! Exact year!';
            if (points >= 900) return 'INCREDIBLE! So close!';
            if (points >= 700) return 'EXCELLENT! Great guess!';
            if (points >= 400) return 'GOOD! Not bad at all!';
            if (points >= 150) return 'OK! You were in the ballpark';
            return 'Keep trying! History is tricky!';
        }
        
        function createFireworks() {
            const colors = ['#ffd700', '#ff6b6b', '#4ecdc4', '#ff00ff', '#00ff00', '#00bfff', '#ff4500', '#9400d3'];
            const overlay = document.createElement('div');
            overlay.className = 'fireworks-overlay';
            document.body.appendChild(overlay);
            setTimeout(() => overlay.remove(), 3000);
            
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight * 0.6;
                    createFireworkBurst(x, y, colors);
                }, i * 200);
            }
        }
        
        function createFireworkBurst(x, y, colors) {
            const particleCount = 30;
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'firework-particle';
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.backgroundColor = color;
                particle.style.boxShadow = `0 0 10px ${color}, 0 0 20px ${color}`;
                
                const angle = (i / particleCount) * Math.PI * 2;
                const velocity = 100 + Math.random() * 100;
                const tx = Math.cos(angle) * velocity;
                const ty = Math.sin(angle) * velocity;
                
                particle.style.setProperty('--tx', tx + 'px');
                particle.style.setProperty('--ty', ty + 'px');
                
                document.body.appendChild(particle);
                setTimeout(() => particle.remove(), 1500);
            }
            
            // Center glow
            const glow = document.createElement('div');
            glow.className = 'firework';
            glow.style.left = x + 'px';
            glow.style.top = y + 'px';
            glow.style.backgroundColor = color;
            glow.style.boxShadow = `0 0 30px ${color}, 0 0 60px ${color}`;
            document.body.appendChild(glow);
            setTimeout(() => glow.remove(), 1500);
        }
        
        function formatYear(year) {
            if (year < 0) return Math.abs(year) + ' BC';
            return year.toString();
        }
        
        function startTimer() {
            timeLeft = 30;
            timerEl.textContent = timeLeft;
            timerEl.classList.remove('warning');
            timerFill.style.width = '100%';
            
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                timeLeft--;
                timerEl.textContent = timeLeft;
                timerFill.style.width = (timeLeft / 30 * 100) + '%';
                
                if (timeLeft <= 10) {
                    timerEl.classList.add('warning');
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    autoSubmit();
                }
            }, 1000);
        }
        
        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }
        
        function autoSubmit() {
            if (dateInput.value === '') {
                dateInput.value = '0';
            }
            submitGuess();
        }
        
        function loadNewEvent() {
            questionNumber++;
            if (questionNumber > maxQuestions) {
                showFinalScore();
                return;
            }
            
            currentEvent = getRandomEvent();
            eventText.textContent = currentEvent.event;
            dateInput.value = '';
            dateInput.disabled = false;
            submitBtn.disabled = false;
            resultPanel.classList.remove('show', 'excellent', 'good', 'ok', 'poor');
            progressFill.style.width = ((questionNumber - 1) / maxQuestions * 100) + '%';
            questionCounter.textContent = `Question ${questionNumber} / ${maxQuestions}`;
            dateInput.focus();
            startTimer();
        }
        
        function submitGuess() {
            const guess = parseInt(dateInput.value);
            if (isNaN(guess)) {
                dateInput.style.borderColor = '#e74c3c';
                setTimeout(() => dateInput.style.borderColor = 'rgba(255, 215, 0, 0.5)', 500);
                return;
            }
            
            dateInput.disabled = true;
            submitBtn.disabled = true;
            stopTimer();
            
            // Show suspense message
            resultEmoji.textContent = 'ü§î';
            resultText.textContent = 'Calculating thy wisdom...';
            resultDetails.textContent = '';
            pointsEarned.textContent = '';
            resultPanel.className = 'result-panel show';
            
            // Reveal answer after 2 seconds
            setTimeout(() => {
                const actual = currentEvent.year;
                const difference = Math.abs(guess - actual);
                const points = calculatePoints(guess, actual);
                
                totalScore += points;
                if (points > bestScore) bestScore = points;
                
                totalScoreEl.textContent = totalScore;
                bestScoreEl.textContent = bestScore;
                
                resultEmoji.textContent = getResultEmoji(points);
                resultText.textContent = getResultMessage(points, difference);
                resultDetails.textContent = `Correct answer: ${formatYear(actual)} | Your guess: ${formatYear(guess)} | Off by ${difference} year${difference !== 1 ? 's' : ''}`;
                pointsEarned.textContent = `+${points} points`;
                
                resultPanel.className = 'result-panel show ' + getResultClass(points);
                
                // Launch fireworks if perfect score!
                if (points === 1000) {
                    createFireworks();
                }
            }, 2000);
        }
        
        function showFinalScore() {
            stopTimer();
            gameArea.style.display = 'none';
            finalScore.classList.add('show');
            finalPoints.textContent = totalScore;
        }
        
        function restartGame() {
            totalScore = 0;
            bestScore = 0;
            questionNumber = 0;
            usedEvents = [];
            totalScoreEl.textContent = '0';
            bestScoreEl.textContent = '0';
            gameArea.style.display = 'block';
            finalScore.classList.remove('show');
            loadNewEvent();
        }
        
        submitBtn.addEventListener('click', submitGuess);
        dateInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !submitBtn.disabled) submitGuess();
        });
        nextBtn.addEventListener('click', loadNewEvent);
        restartBtn.addEventListener('click', restartGame);
        
        // Start the game
        loadNewEvent();
    </script>
</body>
</html>